import{a as b}from"/build-v1/_shared/chunk-C6G2CU7L.js";import{c as J,e as x}from"/build-v1/_shared/chunk-Y24IREY5.js";var k=J((Ee,N)=>{var Q="Expected a function",V=NaN,X="[object Symbol]",q=/^\s+|\s+$/g,Y=/^[-+]0x[0-9a-f]+$/i,Z=/^0b[01]+$/i,ee=/^0o[0-7]+$/i,te=parseInt,re=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,oe=typeof self=="object"&&self&&self.Object===Object&&self,ne=re||oe||Function("return this")(),ue=Object.prototype,se=ue.toString,ie=Math.max,fe=Math.min,D=function(){return ne.Date.now()};function ae(e,t,r){var o,s,u,n,a,m,p=0,R=!1,g=!1,c=!0;if(typeof e!="function")throw new TypeError(Q);t=F(t)||0,I(r)&&(R=!!r.leading,g="maxWait"in r,u=g?ie(F(r.maxWait)||0,t):u,c="trailing"in r?!!r.trailing:c);function l(i){var d=o,h=s;return o=s=void 0,p=i,n=e.apply(h,d),n}function v(i){return p=i,a=setTimeout(O,t),R?l(i):n}function $(i){var d=i-m,h=i-p,M=t-d;return g?fe(M,u-h):M}function w(i){var d=i-m,h=i-p;return m===void 0||d>=t||d<0||g&&h>=u}function O(){var i=D();if(w(i))return C(i);a=setTimeout(O,$(i))}function C(i){return a=void 0,c&&o?l(i):(o=s=void 0,n)}function K(){a!==void 0&&clearTimeout(a),p=0,o=m=s=a=void 0}function G(){return a===void 0?n:C(D())}function T(){var i=D(),d=w(i);if(o=arguments,s=this,m=i,d){if(a===void 0)return v(m);if(g)return a=setTimeout(O,t),l(m)}return a===void 0&&(a=setTimeout(O,t)),n}return T.cancel=K,T.flush=G,T}function I(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function ce(e){return!!e&&typeof e=="object"}function le(e){return typeof e=="symbol"||ce(e)&&se.call(e)==X}function F(e){if(typeof e=="number")return e;if(le(e))return V;if(I(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=I(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(q,"");var r=Z.test(e);return r||ee.test(e)?te(e.slice(2),r?2:8):Y.test(e)?V:+e}N.exports=ae});var j=x(b());function E(e){(0,j.useEffect)(()=>{typeof e=="function"&&e()},[])}var U=()=>{};var L=x(b());function H(e,t=0,r=!0,o=!1){let s=(0,L.useRef)();(0,L.useEffect)(()=>{s.current=e});function u(){var n;(n=s.current)===null||n===void 0||n.call(s)}(0,L.useEffect)(()=>{if(r){o&&u();let n=window.setInterval(u,t);return()=>{window.clearInterval(n)}}return U},[r,t,o])}var A=x(k()),S=x(b());function z(e,t,r){let o=(0,S.useCallback)(u=>(0,A.default)(u,t,r),[t,r]),s=(0,S.useRef)(o(e));return(0,S.useEffect)(()=>(s.current=o(e),()=>{var u;return(u=s.current)===null||u===void 0?void 0:u.cancel()}),[e,o]),s.current}var P=x(b());var y=x(b());var B=x(b());function _(e){(0,B.useEffect)(()=>e,[])}function W(e,t){let r=(0,y.useRef)(!1),o=(0,y.useMemo)(()=>typeof t<"u"&&!Array.isArray(t)?[t]:(Array.isArray(t)&&t.length===0&&console.warn("Using [] as the second argument makes useDidUpdate a noop. The second argument should either be `undefined` or an array of length greater than 0."),t),[t]);(0,y.useEffect)(()=>{r.current&&e()},o),E(()=>{r.current=!0}),_(()=>{r.current=!1})}var me={initializeWithNull:!1},pe=(e,t,r={})=>{let{initializeWithNull:o}=Object.assign({},me,r),[s,u]=(0,P.useState)(o?null:e),n=z(u,t);return E(()=>{o&&n(e)}),W(()=>{n(e)},[e]),[s,u]};var f=x(b());function de(e){var t;if(typeof localStorage>"u")return null;let r=(t=localStorage.getItem(e))!==null&&t!==void 0?t:"null";try{return JSON.parse(r)}catch(o){console.error(o)}return r}function xe(e,t){return typeof localStorage>"u"?null:localStorage.setItem(e,JSON.stringify(t))}function ge(e,t){let r=de(e);return r===null?t:r}function be(e,t){let[r,o]=(0,f.useState)(()=>ge(e,t)),s=(0,f.useRef)(!1),u=(0,f.useRef)(!1),n=(0,f.useMemo)(()=>`rooks-${e}-localstorage-update`,[e]);(0,f.useEffect)(()=>{(!s.current||!u.current)&&xe(e,r)},[e,r]);let a=(0,f.useCallback)(c=>{var l;if(c.storageArea===localStorage&&c.key===e)try{s.current=!0;let v=JSON.parse((l=c.newValue)!==null&&l!==void 0?l:"null");r!==v&&o(v)}catch(v){console.log(v)}},[e,r]);(0,f.useEffect)(()=>typeof window<"u"?(window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}):(console.warn("useLocalstorageState: window is undefined."),()=>{}),[a]);let m=(0,f.useCallback)(c=>{try{u.current=!0;let{newValue:l}=c.detail;r!==l&&o(l)}catch(l){console.log(l)}},[r]);(0,f.useEffect)(()=>typeof document<"u"?(document.addEventListener(n,m),()=>{document.removeEventListener(n,m)}):(console.warn("[useLocalstorageState] document is undefined."),()=>{}),[n,m]);let p=(0,f.useCallback)(c=>{if(typeof document<"u"){let l=new CustomEvent(n,{detail:{newValue:c}});document.dispatchEvent(l)}else console.warn("[useLocalstorageState] document is undefined.")},[n]),R=(0,f.useCallback)(c=>{s.current=!1,u.current=!1,o(c),p(c)},[p]),g=(0,f.useCallback)(()=>{localStorage.removeItem(e)},[e]);return[r,R,g]}export{E as a,H as b,W as c,pe as d,be as e};
