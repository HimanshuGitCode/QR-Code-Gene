import{a as he,b as H,c as ve,d as Me,f as I,g as ae,i as ke,l as ye,m as oe,n as me,o as He,p as Ue,q as ge,r as ue,u as Le,v as we,w as Fe,x as $e,y as We,z as Pe}from"/build-v1/_shared/chunk-IFQZM2H3.js";var Xe="warn";function un(r){Xe=r}function Vt(){return Xe}var g;(function(r){r.afterCreate="afterCreate",r.afterAttach="afterAttach",r.afterCreationFinalization="afterCreationFinalization",r.beforeDetach="beforeDetach",r.beforeDestroy="beforeDestroy"})(g||(g={}));var Ae=function(r,n){return Ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},Ae(r,n)};function y(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Ae(r,n);function e(){this.constructor=r}r.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var N=function(){return N=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},N.apply(this,arguments)};function Rt(r,n){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&n.indexOf(t)<0&&(e[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(r);i<t.length;i++)n.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(r,t[i])&&(e[t[i]]=r[t[i]]);return e}function zt(r,n){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},t,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(s){return function(p){return l([s,p])}}function l(s){if(t)throw new TypeError("Generator is already executing.");for(;e;)try{if(t=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,i=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){e=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){e.label=s[1];break}if(s[0]===6&&e.label<a[1]){e.label=a[1],a=s;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(s);break}a[2]&&e.ops.pop(),e.trys.pop();continue}s=n.call(r,e)}catch(p){s=[6,p],i=0}finally{t=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function se(r){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&r[n],t=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&t>=r.length&&(r=void 0),{value:r&&r[t++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ee(r,n){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var t=e.call(r),i,a=[],o;try{for(;(n===void 0||n-- >0)&&!(i=t.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(e=t.return)&&e.call(t)}finally{if(o)throw o.error}}return a}function $(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(Ee(arguments[n]));return r}function et(r){return _(r,1),c(r).type}function sn(r,n){return _(r,1),Ce(n,2),c(r).onSnapshot(n)}function Ge(r,n){_(r,1),A(n,function(e){return typeof e=="object"},"object or array",2),c(r).applyPatches(xe(n))}function ln(r,n){return _(r,1),c(r).applySnapshot(n)}function tt(r,n){n===void 0&&(n=!0),_(r,1);var e=c(r);return n?e.snapshot:K(e.type.getSnapshot(e,!1))}function fn(r,n){n===void 0&&(n=1),_(r,1),lr(n,2,0);for(var e=n,t=c(r).parent;t;){if(--e===0)return t.storedValue;t=t.parent}throw f("Failed to find the parent of "+c(r)+" at depth "+n)}function cn(r,n){_(r,1),V(n,2);for(var e=c(r).parent;e;){if(n.is(e.storedValue))return e.storedValue;e=e.parent}throw f("Failed to find the parent of "+c(r)+" of a given type")}function Mt(r){return _(r,1),c(r).root.storedValue}function kt(r){return _(r,1),c(r).path}function Ht(r){return _(r,1),c(r).identifier}function pn(r,n){n===void 0&&(n=!0),_(r,1);var e=c(r);return e.type.create(e.snapshot,n===!0?e.root.environment:n===!1?void 0:n)}function bn(r){_(r,1);var n=c(r);n.isRoot?n.die():n.parent.removeChild(n.subpath)}function dn(r){return _(r,1),c(r).observableIsAlive}var rt=function(){function r(n,e,t,i){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"environment",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"_escapedSubpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"storedValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"aliveAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:m.INITIALIZING}),Object.defineProperty(this,"_hookSubscribers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pathAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.environment=i,this.baseSetParent(e,t)}return Object.defineProperty(r.prototype,"subpath",{get:function(){return this._subpath},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"subpathUponDeath",{get:function(){return this._subpathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pathUponDeath",{get:function(){return this._pathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(n){var e=this.isAlive;this._state=n;var t=this.isAlive;this.aliveAtom&&e!==t&&this.aliveAtom.reportChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fireInternalHook",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this._hookSubscribers&&this._hookSubscribers.emit(n,this,n)}}),Object.defineProperty(r.prototype,"registerHook",{enumerable:!1,configurable:!0,writable:!0,value:function(n,e){return this._hookSubscribers||(this._hookSubscribers=new ht),this._hookSubscribers.register(n,e)}}),Object.defineProperty(r.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"getReconciliationType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type}}),Object.defineProperty(r.prototype,"baseSetParent",{enumerable:!1,configurable:!0,writable:!0,value:function(n,e){this._parent=n,this._subpath=e,this._escapedSubpath=void 0,this.pathAtom&&this.pathAtom.reportChanged()}}),Object.defineProperty(r.prototype,"path",{get:function(){return this.getEscapedPath(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"getEscapedPath",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n&&(this.pathAtom||(this.pathAtom=he("path")),this.pathAtom.reportObserved()),this.parent?(this._escapedSubpath===void 0&&(this._escapedSubpath=this._subpath?L(this._subpath):""),this.parent.getEscapedPath(n)+"/"+this._escapedSubpath):""}}),Object.defineProperty(r.prototype,"isRoot",{get:function(){return this.parent===null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isAlive",{get:function(){return this.state!==m.DEAD},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isDetaching",{get:function(){return this.state===m.DETACHING},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"observableIsAlive",{get:function(){return this.aliveAtom||(this.aliveAtom=he("alive")),this.aliveAtom.reportObserved(),this.isAlive},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"baseFinalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(d()&&!this.isAlive)throw fail("assertion failed: cannot finalize the creation of a node that is already dead");if(this.state===m.CREATED){if(this.parent){if(this.parent.state!==m.FINALIZED)return;this.fireHook(g.afterAttach)}this.state=m.FINALIZED,n&&n()}}}),Object.defineProperty(r.prototype,"baseFinalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._hookSubscribers&&this._hookSubscribers.clearAll(),this._subpathUponDeath=this._subpath,this._pathUponDeath=this.getEscapedPath(!1),this.baseSetParent(null,""),this.state=m.DEAD}}),Object.defineProperty(r.prototype,"baseAboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.fireHook(g.beforeDestroy)}}),r}(),ee=function(r){y(n,r);function n(e,t,i,a,o){var u=r.call(this,e,t,i,a)||this;try{u.storedValue=e.createNewInstance(o)}catch(l){throw u.state=m.DEAD,l}return u.state=m.CREATED,u.finalizeCreation(),u}return Object.defineProperty(n.prototype,"root",{get:function(){if(!this.parent)throw f("This scalar node is not part of a tree");return this.parent.root},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this.parent!==e,a=this.subpath!==t;if(!(!i&&!a)){if(d()){if(!t)throw f("assertion failed: subpath expected");if(!e)throw f("assertion failed: parent expected");if(i)throw f("assertion failed: scalar nodes cannot change their parent")}this.environment=void 0,this.baseSetParent(this.parent,t)}}}),Object.defineProperty(n.prototype,"snapshot",{get:function(){return K(this.getSnapshot())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(n.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=(this.isAlive?this.path:this.pathUponDeath)||"<root>";return this.type.name+"@"+e+(this.isAlive?"":" [dead]")}}),Object.defineProperty(n.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){!this.isAlive||this.state===m.DETACHING||(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(n.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeCreation()}}),Object.defineProperty(n.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseAboutToDie()}}),Object.defineProperty(n.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeDeath()}}),Object.defineProperty(n.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.fireInternalHook(e)}}),n}(rt);ee.prototype.die=I(ee.prototype.die);var Ut=1,Lt={onError:function(r){throw r}},O=function(r){y(n,r);function n(e,t,i,a,o){var u=r.call(this,e,t,i,a)||this;if(Object.defineProperty(u,"nodeId",{enumerable:!0,configurable:!0,writable:!0,value:++Ut}),Object.defineProperty(u,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"unnormalizedIdentifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"identifierCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"isProtectionEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(u,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_applyPatches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_applySnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_autoUnbox",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(u,"_isRunningAction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(u,"_hasSnapshotReaction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(u,"_observableInstanceState",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(u,"_childNodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_initialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_cachedInitialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_cachedInitialSnapshotCreated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(u,"_snapshotComputed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_snapshotUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_internalEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),u._snapshotComputed=ve(function(){return K(u.getSnapshot())}),u.unbox=u.unbox.bind(u),u._initialSnapshot=K(o),u.identifierAttribute=e.identifierAttribute,t||(u.identifierCache=new Qt),u._childNodes=e.initializeChildNodes(u,u._initialSnapshot),u.identifier=null,u.unnormalizedIdentifier=null,u.identifierAttribute&&u._initialSnapshot){var l=u._initialSnapshot[u.identifierAttribute];if(l===void 0){var s=u._childNodes[u.identifierAttribute];s&&(l=s.value)}if(typeof l!="string"&&typeof l!="number")throw f("Instance identifier '"+u.identifierAttribute+"' for type '"+u.type.name+"' must be a string or a number");u.identifier=ne(l),u.unnormalizedIdentifier=l}return t?t.root.identifierCache.addNodeToCache(u):u.identifierCache.addNodeToCache(u),u}return Object.defineProperty(n.prototype,"applyPatches",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.createObservableInstanceIfNeeded(),this._applyPatches(e)}}),Object.defineProperty(n.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.createObservableInstanceIfNeeded(),this._applySnapshot(e)}}),Object.defineProperty(n.prototype,"createObservableInstanceIfNeeded",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._observableInstanceState===0&&this.createObservableInstance()}}),Object.defineProperty(n.prototype,"createObservableInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;if(d()&&this.state!==m.INITIALIZING)throw f("assertion failed: the creation of the observable instance must be done on the initializing phase");this._observableInstanceState=1;for(var i=[],a=this.parent;a&&a._observableInstanceState===0;)i.unshift(a),a=a.parent;try{for(var o=se(i),u=o.next();!u.done;u=o.next()){var l=u.value;l.createObservableInstanceIfNeeded()}}catch(p){e={error:p}}finally{try{u&&!u.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}var s=this.type;try{this.storedValue=s.createNewInstance(this._childNodes),this.preboot(),this._isRunningAction=!0,s.finalizeNewInstance(this,this.storedValue)}catch(p){throw this.state=m.DEAD,p}finally{this._isRunningAction=!1}this._observableInstanceState=2,this._snapshotComputed.trackAndCompute(),this.isRoot&&this._addSnapshotReaction(),this._childNodes=Z,this.state=m.CREATED,this.fireHook(g.afterCreate),this.finalizeCreation()}}),Object.defineProperty(n.prototype,"root",{get:function(){var e=this.parent;return e?e.root:this},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clearParent",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!!this.parent){this.fireHook(g.beforeDetach);var e=this.state;this.state=m.DETACHING;var t=this.root,i=t.environment,a=t.identifierCache.splitCache(this);try{this.parent.removeChild(this.subpath),this.baseSetParent(null,""),this.environment=i,this.identifierCache=a}finally{this.state=e}}}}),Object.defineProperty(n.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=e!==this.parent,a=t!==this.subpath;if(!(!i&&!a)){if(d()){if(!t)throw f("assertion failed: subpath expected");if(!e)throw f("assertion failed: new parent expected");if(this.parent&&i)throw f("A node cannot exists twice in the state tree. Failed to add "+this+" to path '"+e.path+"/"+t+"'.");if(!this.parent&&e.root===this)throw f("A state tree is not allowed to contain itself. Cannot assign "+this+" to path '"+e.path+"/"+t+"'");if(!this.parent&&!!this.environment&&this.environment!==e.root.environment)throw f("A state tree cannot be made part of another state tree as long as their environments are different.")}i?(this.environment=void 0,e.root.identifierCache.mergeCache(this),this.baseSetParent(e,t),this.fireHook(g.afterAttach)):a&&this.baseSetParent(this.parent,t)}}}),Object.defineProperty(n.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.fireInternalHook(e);var i=this.storedValue&&typeof this.storedValue=="object"&&this.storedValue[e];typeof i=="function"&&(ae?ae(function(){i.apply(t.storedValue)}):i.apply(this.storedValue))}}),Object.defineProperty(n.prototype,"snapshot",{get:function(){return this._snapshotComputed.get()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.isAlive?this._observableInstanceState===2?this._getActualSnapshot():this._getCachedInitialSnapshot():this._snapshotUponDeath}}),Object.defineProperty(n.prototype,"_getActualSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(n.prototype,"_getCachedInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this._cachedInitialSnapshotCreated){var e=this.type,t=this._childNodes,i=this._initialSnapshot;this._cachedInitialSnapshot=e.processInitialSnapshot(t,i),this._cachedInitialSnapshotCreated=!0}return this._cachedInitialSnapshot}}),Object.defineProperty(n.prototype,"isRunningAction",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._isRunningAction?!0:this.isRoot?!1:this.parent.isRunningAction()}}),Object.defineProperty(n.prototype,"assertAlive",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=Vt();if(!this.isAlive&&t!=="ignore"){var i=this._getAssertAliveError(e);switch(t){case"error":throw f(i);case"warn":yt(i)}}}}),Object.defineProperty(n.prototype,"_getAssertAliveError",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.getEscapedPath(!1)||this.pathUponDeath||"",i=e.subpath&&L(e.subpath)||"",a=e.actionContext||at();a&&a.type!=="action"&&a.parentActionEvent&&(a=a.parentActionEvent);var o="";if(a&&a.name!=null){var u=a&&a.context&&kt(a.context)||t;o=u+"."+a.name+"()"}return"You are trying to read or write to an object that is no longer part of a state tree. (Object type: '"+this.type.name+"', Path upon death: '"+t+"', Subpath: '"+i+"', Action: '"+o+"'). Either detach nodes first, or don't use objects after removing / replacing them in the tree."}}),Object.defineProperty(n.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.assertAlive({subpath:e}),this._autoUnbox=!1;try{return this._observableInstanceState===2?this.type.getChildNode(this,e):this._childNodes[e]}finally{this._autoUnbox=!0}}}),Object.defineProperty(n.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertAlive(Z),this._autoUnbox=!1;try{return this._observableInstanceState===2?this.type.getChildren(this):ft(this._childNodes)}finally{this._autoUnbox=!0}}}),Object.defineProperty(n.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.type.getChildType(e)}}),Object.defineProperty(n.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"assertWritable",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.assertAlive(e),!this.isRunningAction()&&this.isProtected)throw f("Cannot modify '"+this+"', the object is protected and can only be modified by using an action.")}}),Object.defineProperty(n.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.type.removeChild(this,e)}}),Object.defineProperty(n.prototype,"unbox",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&(this.assertAlive({subpath:e.subpath||e.subpathUponDeath}),this._autoUnbox?e.value:e)}}),Object.defineProperty(n.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=(this.isAlive?this.path:this.pathUponDeath)||"<root>",t=this.identifier?"(id: "+this.identifier+")":"";return this.type.name+"@"+e+t+(this.isAlive?"":" [dead]")}}),Object.defineProperty(n.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.baseFinalizeCreation(function(){var t,i;try{for(var a=se(e.getChildren()),o=a.next();!o.done;o=a.next()){var u=o.value;u.finalizeCreation()}}catch(l){t={error:l}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}e.fireInternalHook(g.afterCreationFinalization)})}}),Object.defineProperty(n.prototype,"detach",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.isAlive)throw f("Error while detaching, node is not alive.");this.clearParent()}}),Object.defineProperty(n.prototype,"preboot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this._applyPatches=te(this.storedValue,"@APPLY_PATCHES",function(t){t.forEach(function(i){if(!i.path){e.type.applySnapshot(e,i.value);return}var a=vr(i.path),o=tr(e,a.slice(0,-1));o.applyPatchLocally(a[a.length-1],i)})}),this._applySnapshot=te(this.storedValue,"@APPLY_SNAPSHOT",function(t){if(t!==e.snapshot)return e.type.applySnapshot(e,t)}),U(this.storedValue,"$treenode",this),U(this.storedValue,"toJSON",er)}}),Object.defineProperty(n.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){!this.isAlive||this.state===m.DETACHING||(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(n.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._observableInstanceState!==0&&(this.getChildren().forEach(function(e){e.aboutToDie()}),this.baseAboutToDie(),this._internalEventsEmit("dispose"),this._internalEventsClear("dispose"))}}),Object.defineProperty(n.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.getChildren().forEach(function(t){t.finalizeDeath()}),this.root.identifierCache.notifyDied(this);var e=this.snapshot;this._snapshotUponDeath=e,this._internalEventsClearAll(),this.baseFinalizeDeath()}}),Object.defineProperty(n.prototype,"onSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._addSnapshotReaction(),this._internalEventsRegister("snapshot",e)}}),Object.defineProperty(n.prototype,"emitSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._internalEventsEmit("snapshot",e)}}),Object.defineProperty(n.prototype,"onPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._internalEventsRegister("patch",e)}}),Object.defineProperty(n.prototype,"emitPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this._internalEventsHasSubscribers("patch")){var i=ar({},e,{path:t.path.substr(this.path.length)+"/"+e.path}),a=Ee(cr(i),2),o=a[0],u=a[1];this._internalEventsEmit("patch",o,u)}this.parent&&this.parent.emitPatch(e,t)}}),Object.defineProperty(n.prototype,"hasDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._internalEventsHas("dispose",e)}}),Object.defineProperty(n.prototype,"addDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.hasDisposer(e)){this._internalEventsRegister("dispose",e,!0);return}throw f("cannot add a disposer when it is already registered for execution")}}),Object.defineProperty(n.prototype,"removeDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this._internalEventsHas("dispose",e))throw f("cannot remove a disposer which was never registered for execution");this._internalEventsUnregister("dispose",e)}}),Object.defineProperty(n.prototype,"removeMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.middlewares){var t=this.middlewares.indexOf(e);t>=0&&this.middlewares.splice(t,1)}}}),Object.defineProperty(n.prototype,"addMiddleWare",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;t===void 0&&(t=!0);var a={handler:e,includeHooks:t};return this.middlewares?this.middlewares.push(a):this.middlewares=[a],function(){i.removeMiddleware(a)}}}),Object.defineProperty(n.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.assertWritable({subpath:e}),this.createObservableInstanceIfNeeded(),this.type.applyPatchLocally(this,e,t)}}),Object.defineProperty(n.prototype,"_addSnapshotReaction",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(!this._hasSnapshotReaction){var t=ke(function(){return e.snapshot},function(i){return e.emitSnapshot(i)},Lt);this.addDisposer(t),this._hasSnapshotReaction=!0}}}),Object.defineProperty(n.prototype,"_internalEventsHasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!this._internalEvents&&this._internalEvents.hasSubscribers(e)}}),Object.defineProperty(n.prototype,"_internalEventsRegister",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){return i===void 0&&(i=!1),this._internalEvents||(this._internalEvents=new ht),this._internalEvents.register(e,t,i)}}),Object.defineProperty(n.prototype,"_internalEventsHas",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!!this._internalEvents&&this._internalEvents.has(e,t)}}),Object.defineProperty(n.prototype,"_internalEventsUnregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._internalEvents&&this._internalEvents.unregister(e,t)}}),Object.defineProperty(n.prototype,"_internalEventsEmit",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];this._internalEvents&&(t=this._internalEvents).emit.apply(t,$([e],i))}}),Object.defineProperty(n.prototype,"_internalEventsClear",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._internalEvents&&this._internalEvents.clear(e)}}),Object.defineProperty(n.prototype,"_internalEventsClearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._internalEvents&&this._internalEvents.clearAll()}}),n}(rt);O.prototype.createObservableInstance=I(O.prototype.createObservableInstance);O.prototype.detach=I(O.prototype.detach);O.prototype.die=I(O.prototype.die);var nt,b;(function(r){r[r.String=1]="String",r[r.Number=2]="Number",r[r.Boolean=4]="Boolean",r[r.Date=8]="Date",r[r.Literal=16]="Literal",r[r.Array=32]="Array",r[r.Map=64]="Map",r[r.Object=128]="Object",r[r.Frozen=256]="Frozen",r[r.Optional=512]="Optional",r[r.Reference=1024]="Reference",r[r.Identifier=2048]="Identifier",r[r.Late=4096]="Late",r[r.Refinement=8192]="Refinement",r[r.Union=16384]="Union",r[r.Null=32768]="Null",r[r.Undefined=65536]="Undefined",r[r.Integer=131072]="Integer",r[r.Custom=262144]="Custom",r[r.SnapshotProcessor=524288]="SnapshotProcessor"})(b||(b={}));var it="cannotDetermine",Ft=Symbol("$type"),x=function(){function r(n){Object.defineProperty(this,nt,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"C",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"S",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"T",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"N",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isType",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=n}return Object.defineProperty(r.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(n,e){return C(this,n),this.instantiate(null,"",e,n).value}}),Object.defineProperty(r.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,e){throw f("unimplemented method")}}),Object.defineProperty(r.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n===this}}),Object.defineProperty(r.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,e){var t=lt(n);if(t){var i=et(n);return this.isAssignableFrom(i)?j():S(e,n)}return this.isValidSnapshot(n,e)}}),Object.defineProperty(r.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.validate(n,[{path:"",type:this}]).length===0}}),Object.defineProperty(r.prototype,"Type",{get:function(){throw f("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"TypeWithoutSTN",{get:function(){throw f("Factory.TypeWithoutSTN should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.TypeWithoutSTN`")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"SnapshotType",{get:function(){throw f("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"CreationType",{get:function(){throw f("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")},enumerable:!1,configurable:!0}),r}();nt=Ft;x.prototype.create=I(x.prototype.create);var J=function(r){y(n,r);function n(e){var t=r.call(this,e)||this;return Object.defineProperty(t,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return Object.defineProperty(n.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e===void 0&&(e=this.getDefaultSnapshot()),r.prototype.create.call(this,e,t)}}),Object.defineProperty(n.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.createObservableInstanceIfNeeded(),e.storedValue}}),Object.defineProperty(n.prototype,"isMatchingSnapshotId",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!e.identifierAttribute||e.identifier===ne(t[e.identifierAttribute])}}),Object.defineProperty(n.prototype,"tryToReconcileNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e.isDetaching?!1:e.snapshot===t||v(t)&&c(t)===e?!0:e.type===this&&pt(t)&&!v(t)&&this.isMatchingSnapshotId(e,t)?(e.applySnapshot(t),!0):!1}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){var o=this.tryToReconcileNode(e,t);if(o)return e.setParent(i,a),e;if(e.die(),v(t)&&this.isAssignableFrom(et(t))){var u=c(t);return u.setParent(i,a),u}return this.instantiate(i,a,void 0,t)}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),n}(x);J.prototype.create=I(J.prototype.create);var q=function(r){y(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(n.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){if(!e.isDetaching&&e.type===this&&e.storedValue===t)return e;var o=this.instantiate(i,a,void 0,t);return e.die(),o}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),n}(x);function E(r){return typeof r=="object"&&r&&r.isType===!0}function V(r,n){A(r,E,"mobx-state-tree type",n)}var hn=function(){function r(n,e){Object.defineProperty(this,"hooks",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"call",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"flowsPending",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"running",{enumerable:!0,configurable:!0,writable:!0,value:!0}),n&&n.onStart(e)}return Object.defineProperty(r.prototype,"finish",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.running&&(this.running=!1,this.hooks&&this.hooks.onFinish(this.call,n))}}),Object.defineProperty(r.prototype,"incFlowsPending",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.flowsPending++}}),Object.defineProperty(r.prototype,"decFlowsPending",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.flowsPending--}}),Object.defineProperty(r.prototype,"hasFlowsPending",{get:function(){return this.flowsPending>0},enumerable:!1,configurable:!0}),r}();var $t=1,X;function at(){return X}function ot(){return $t++}function Te(r,n){var e=c(r.context);r.type==="action"&&e.assertAlive({actionContext:r});var t=e._isRunningAction;e._isRunningAction=!0;var i=X;X=r;try{return Gt(e,r,n)}finally{X=i,e._isRunningAction=t}}function ut(r){if(!!r)return r.type==="action"?r:r.parentActionEvent}function te(r,n,e){var t=function(){var i=ot(),a=X,o=ut(a);return Te({type:"action",name:n,id:i,args:vt(arguments),context:r,tree:Mt(r),rootId:a?a.rootId:i,parentId:a?a.id:0,allParentIds:a?$(a.allParentIds,[a.id]):[],parentEvent:a,parentActionEvent:o},e)};return t._isMSTAction=!0,t}var Wt=function(){function r(n,e){Object.defineProperty(this,"arrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"inArrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e.$mst_middleware&&this.middlewares.push(e.$mst_middleware);for(var t=n;t;)t.middlewares&&this.middlewares.push(t.middlewares),t=t.parent}return Object.defineProperty(r.prototype,"isEmpty",{get:function(){return this.middlewares.length<=0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"getNextMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this.middlewares[this.arrayIndex];if(!!n){var e=n[this.inArrayIndex++];return e||(this.arrayIndex++,this.inArrayIndex=0,this.getNextMiddleware())}}}),r}();function Gt(r,n,e){var t=new Wt(r,e);if(t.isEmpty)return I(e).apply(null,n.args);var i=null;function a(o){var u=t.getNextMiddleware(),l=u&&u.handler;if(!l)return I(e).apply(null,o.args);if(!u.includeHooks&&g[o.name])return a(o);var s=!1;function p(Y,ie){s=!0,i=a(Y),ie&&(i=ie(i))}var h=!1;function w(Y){h=!0,i=Y}if(l(o,p,w),d()){if(!s&&!h){var P=c(o.tree);throw f("Neither the next() nor the abort() callback within the middleware "+l.name+' for the action: "'+o.name+'" on the node: '+P.type.name+" was invoked.")}else if(s&&h){var P=c(o.tree);throw f("The next() and abort() callback within the middleware "+l.name+' for the action: "'+o.name+'" on the node: '+P.type.name+" were invoked.")}}return i}return a(n)}function Yt(r){try{return JSON.stringify(r)}catch(n){return"<Unserializable: "+n+">"}}function st(r){return typeof r=="function"?"<function"+(r.name?" "+r.name:"")+">":v(r)?"<"+r+">":"`"+Yt(r)+"`"}function Jt(r){return r.length<280?r:r.substring(0,272)+"......"+r.substring(r.length-8)}function Bt(r){var n=r.value,e=r.context[r.context.length-1].type,t=r.context.map(function(u){var l=u.path;return l}).filter(function(u){return u.length>0}).join("/"),i=t.length>0?'at path "/'+t+'" ':"",a=v(n)?"value of type "+c(n).type.name+":":M(n)?"value":"snapshot",o=e&&v(n)&&e.is(c(n).snapshot);return""+i+a+" "+st(n)+" is not assignable "+(e?"to type: `"+e.name+"`":"")+(r.message?" ("+r.message+")":"")+(e?Cr(e)||M(n)?".":", expected an instance of `"+e.name+"` or a snapshot like `"+e.describe()+"` instead."+(o?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function De(r,n,e){return r.concat([{path:n,type:e}])}function j(){return B}function S(r,n,e){return[{context:r,value:n,message:e}]}function pe(r){return r.reduce(function(n,e){return n.concat(e)},[])}function C(r,n){sr()&&Zt(r,n)}function Zt(r,n){var e=r.validate(n,[{path:"",type:r}]);if(e.length>0)throw f(Kt(r,n,e))}function Kt(r,n,e){if(e.length!==0)return"Error while converting "+Jt(st(n))+" to `"+r.name+`\`:

    `+e.map(Bt).join(`
    `)}var qt=0,Qt=function(){function r(){Object.defineProperty(this,"cacheId",{enumerable:!0,configurable:!0,writable:!0,value:qt++}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:H.map()}),Object.defineProperty(this,"lastCacheModificationPerId",{enumerable:!0,configurable:!0,writable:!0,value:H.map()})}return Object.defineProperty(r.prototype,"updateLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var e=this.lastCacheModificationPerId.get(n);this.lastCacheModificationPerId.set(n,e===void 0?1:e+1)}}),Object.defineProperty(r.prototype,"getLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var e=this.lastCacheModificationPerId.get(n)||0;return this.cacheId+"-"+e}}),Object.defineProperty(r.prototype,"addNodeToCache",{enumerable:!1,configurable:!0,writable:!0,value:function(n,e){if(e===void 0&&(e=!0),n.identifierAttribute){var t=n.identifier;this.cache.has(t)||this.cache.set(t,H.array([],be));var i=this.cache.get(t);if(i.indexOf(n)!==-1)throw f("Already registered");i.push(n),e&&this.updateLastCacheModificationPerId(t)}}}),Object.defineProperty(r.prototype,"mergeCache",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var e=this;me(n.identifierCache.cache).forEach(function(t){return t.forEach(function(i){e.addNodeToCache(i)})})}}),Object.defineProperty(r.prototype,"notifyDied",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(n.identifierAttribute){var e=n.identifier,t=this.cache.get(e);t&&(t.remove(n),t.length||this.cache.delete(e),this.updateLastCacheModificationPerId(n.identifier))}}}),Object.defineProperty(r.prototype,"splitCache",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var e=this,t=new r,i=n.path;return He(this.cache).forEach(function(a){for(var o=Ee(a,2),u=o[0],l=o[1],s=!1,p=l.length-1;p>=0;p--)l[p].path.indexOf(i)===0&&(t.addNodeToCache(l[p],!1),l.splice(p,1),s=!0);s&&e.updateLastCacheModificationPerId(u)}),t}}),Object.defineProperty(r.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(n,e){var t=this.cache.get(e);return t?t.some(function(i){return n.isAssignableFrom(i.type)}):!1}}),Object.defineProperty(r.prototype,"resolve",{enumerable:!1,configurable:!0,writable:!0,value:function(n,e){var t=this.cache.get(e);if(!t)return null;var i=t.filter(function(a){return n.isAssignableFrom(a.type)});switch(i.length){case 0:return null;case 1:return i[0];default:throw f("Cannot resolve a reference to type '"+n.name+"' with id: '"+e+"' unambigously, there are multiple candidates: "+i.map(function(a){return a.path}).join(", "))}}}),r}();function Ne(r,n,e,t,i){var a=lt(i);if(a){if(a.parent)throw f("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+(n?n.path:"")+"/"+e+"', but it lives already at '"+a.path+"'");return n&&a.setParent(n,e),a}return new O(r,n,e,t,i)}function W(r,n,e,t,i){return new ee(r,n,e,t,i)}function Xt(r){return r instanceof ee||r instanceof O}var m;(function(r){r[r.INITIALIZING=0]="INITIALIZING",r[r.CREATED=1]="CREATED",r[r.FINALIZED=2]="FINALIZED",r[r.DETACHING=3]="DETACHING",r[r.DEAD=4]="DEAD"})(m||(m={}));function v(r){return!!(r&&r.$treenode)}function _(r,n){A(r,v,"mobx-state-tree node",n)}function c(r){if(!v(r))throw f("Value "+r+" is no MST Node");return r.$treenode}function lt(r){return r&&r.$treenode||null}function er(){return c(this).snapshot}function tr(r,n,e){e===void 0&&(e=!0);for(var t=r,i=0;i<n.length;i++){var a=n[i];if(a===".."){if(t=t.parent,t)continue}else{if(a===".")continue;if(t){if(t instanceof ee)try{var o=t.value;v(o)&&(t=c(o))}catch(l){if(!e)return;throw l}if(t instanceof O){var u=t.getChildType(a);if(u&&(t=t.getChildNode(a),t))continue}}}if(e)throw f("Could not resolve '"+a+"' in path '"+(Ye(n.slice(0,i))||"/")+"' while resolving '"+Ye(n)+"'");return}return t}function ft(r){if(!r)return B;var n=Object.keys(r);if(!n.length)return B;var e=new Array(n.length);return n.forEach(function(t,i){e[i]=r[t]}),e}var rr=Object.toString(),B=Object.freeze([]),Z=Object.freeze({}),be=Me().useProxies?{deep:!1}:{deep:!1,proxy:!1};Object.freeze(be);function f(r){return r===void 0&&(r="Illegal state"),new Error("[mobx-state-tree] "+r)}function nr(r){return r}var ir=Number.isInteger||function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r};function ct(r){return Array.isArray(r)||we(r)}function xe(r){return r?ct(r)?r:[r]:B}function ar(r){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];for(var t=0;t<n.length;t++){var i=n[t];for(var a in i)r[a]=i[a]}return r}function z(r){var n;if(r===null||typeof r!="object")return!1;var e=Object.getPrototypeOf(r);return e==null?!0:((n=e.constructor)===null||n===void 0?void 0:n.toString())===rr}function pt(r){return r!==null&&typeof r=="object"&&!(r instanceof Date)&&!(r instanceof RegExp)}function M(r,n){return n===void 0&&(n=!0),r==null||typeof r=="string"||typeof r=="number"||typeof r=="boolean"||n&&r instanceof Date}function K(r){return d()?M(r)||we(r)?r:Object.freeze(r):r}function bt(r){return d()&&(K(r),z(r)&&Object.keys(r).forEach(function(n){!M(r[n])&&!Object.isFrozen(r[n])&&bt(r[n])})),r}function or(r){return typeof r!="function"}function dt(r,n,e){$e(r)?ge(r,n,e):Object.defineProperty(r,n,e)}function U(r,n,e){dt(r,n,{enumerable:!1,writable:!1,configurable:!0,value:e})}function le(r,n,e){dt(r,n,{enumerable:!1,writable:!0,configurable:!0,value:e})}var ur=function(){function r(){Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return Object.defineProperty(r.prototype,"hasSubscribers",{get:function(){return this.handlers.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(n,e){var t=this;return e===void 0&&(e=!1),e?this.handlers.unshift(n):this.handlers.push(n),function(){t.unregister(n)}}}),Object.defineProperty(r.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.handlers.indexOf(n)>=0}}),Object.defineProperty(r.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var e=this.handlers.indexOf(n);e>=0&&this.handlers.splice(e,1)}}),Object.defineProperty(r.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.handlers.length=0}}),Object.defineProperty(r.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=this.handlers.slice();t.forEach(function(i){return i.apply(void 0,$(n))})}}),r}(),ht=function(){function r(){Object.defineProperty(this,"eventHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(r.prototype,"hasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var e=this.eventHandlers&&this.eventHandlers[n];return!!e&&e.hasSubscribers}}),Object.defineProperty(r.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(n,e,t){t===void 0&&(t=!1),this.eventHandlers||(this.eventHandlers={});var i=this.eventHandlers[n];return i||(i=this.eventHandlers[n]=new ur),i.register(e,t)}}),Object.defineProperty(r.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(n,e){var t=this.eventHandlers&&this.eventHandlers[n];return!!t&&t.has(e)}}),Object.defineProperty(r.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(n,e){var t=this.eventHandlers&&this.eventHandlers[n];t&&t.unregister(e)}}),Object.defineProperty(r.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.eventHandlers&&delete this.eventHandlers[n]}}),Object.defineProperty(r.prototype,"clearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.eventHandlers=void 0}}),Object.defineProperty(r.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(n){for(var e,t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var a=this.eventHandlers&&this.eventHandlers[n];a&&(e=a).emit.apply(e,$(t))}}),r}();function vt(r){for(var n=new Array(r.length),e=0;e<r.length;e++)n[e]=r[e];return n}function Oe(r,n){return r.indexOf(n)===0}var Q=function(r,n){!d()||(Q.ids&&!Q.ids.hasOwnProperty(r)&&yt("Deprecation warning: "+n),Q.ids&&(Q.ids[r]=!0))};Q.ids={};function yt(r){console.warn(new Error("[mobx-state-tree] "+r))}function sr(){return d()||typeof process<"u"&&process.env&&process.env.ENABLE_TYPE_CHECK==="true"}function d(){return!1}function A(r,n,e,t){if(d()&&!n(r))throw f("expected "+e+" as argument "+xe(t).join(" or ")+", got "+r+" instead")}function Ce(r,n){A(r,function(e){return typeof e=="function"},"function",n)}function lr(r,n,e,t){A(r,function(i){return typeof i=="number"},"number",n),e!==void 0&&A(r,function(i){return i>=e},"number greater than "+e,n),t!==void 0&&A(r,function(i){return i<=t},"number lesser than "+t,n)}function Ve(r,n,e){e===void 0&&(e=!0),A(r,function(t){return typeof t=="string"},"string",n),e||A(r,function(t){return t!==""},"not empty string",n)}function je(r){typeof queueMicrotask=="function"?queueMicrotask(r):typeof setImmediate=="function"?setImmediate(r):setTimeout(r,1)}function vn(r){return fr(r.name,r)}function yn(r){return zt(this,function(n){switch(n.label){case 0:return[4,r];case 1:return[2,n.sent()]}})}function fr(r,n){var e=function(){var i=ot(),a=at();if(!a)throw f("a mst flow must always have a parent context");var o=ut(a);if(!o)throw f("a mst flow must always have a parent action context");var u={name:r,id:i,tree:a.tree,context:a.context,parentId:a.id,allParentIds:$(a.allParentIds,[a.id]),rootId:a.rootId,parentEvent:a,parentActionEvent:o},l=arguments;function s(p,h,w){p.$mst_middleware=e.$mst_middleware,Te(N(N({},u),{type:h,args:[w]}),p)}return new Promise(function(p,h){var w,P=function(){w=n.apply(null,arguments),Y(void 0)};P.$mst_middleware=e.$mst_middleware,Te(N(N({},u),{type:"flow_spawn",args:vt(l)}),P);function Y(T){var k;try{s(function(D){k=w.next(D)},"flow_resume",T)}catch(D){je(function(){s(function(xt){h(D)},"flow_throw",D)});return}ze(k)}function ie(T){var k;try{s(function(D){k=w.throw(D)},"flow_resume_error",T)}catch(D){je(function(){s(function(xt){h(D)},"flow_throw",D)});return}ze(k)}function ze(T){if(T.done){je(function(){s(function(k){p(k)},"flow_return",T.value)});return}if(!T.value||typeof T.value.then!="function")throw f("Only promises can be yielded to `async`, got: "+T);return T.value.then(Y,ie)}})};return e}function cr(r){if(!("oldValue"in r))throw f("Patches without `oldValue` field cannot be inversed");return[pr(r),br(r)]}function pr(r){switch(r.op){case"add":return{op:"add",path:r.path,value:r.value};case"remove":return{op:"remove",path:r.path};case"replace":return{op:"replace",path:r.path,value:r.value}}}function br(r){switch(r.op){case"add":return{op:"remove",path:r.path};case"remove":return{op:"add",path:r.path,value:r.oldValue};case"replace":return{op:"replace",path:r.path,value:r.oldValue}}}function dr(r){return typeof r=="number"}function L(r){return dr(r)===!0?""+r:r.indexOf("/")===-1&&r.indexOf("~")===-1?r:r.replace(/~/g,"~0").replace(/\//g,"~1")}function hr(r){return r.replace(/~1/g,"/").replace(/~0/g,"~")}function Ye(r){if(r.length===0)return"";var n=function(e){return e.map(L).join("/")};return r[0]==="."||r[0]===".."?n(r):"/"+n(r)}function vr(r){var n=r.split("/").map(hr),e=r===""||r==="."||r===".."||Oe(r,"/")||Oe(r,"./")||Oe(r,"../");if(!e)throw f("a json path must be either rooted, empty or relative, but got '"+r+"'");return n[0]===""&&n.shift(),n}var Se=Symbol("$preProcessorFailed"),yr=function(r){y(n,r);function n(e,t,i){var a=r.call(this,i||e.name)||this;return Object.defineProperty(a,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(a,"_processors",{enumerable:!0,configurable:!0,writable:!0,value:t}),a}return Object.defineProperty(n.prototype,"flags",{get:function(){return this._subtype.flags|b.SnapshotProcessor},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"snapshotProcessor("+this._subtype.describe()+")"}}),Object.defineProperty(n.prototype,"preProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._processors.preProcessor?this._processors.preProcessor.call(null,e):e}}),Object.defineProperty(n.prototype,"preProcessSnapshotSafe",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{return this.preProcessSnapshot(e)}catch{return Se}}}),Object.defineProperty(n.prototype,"postProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._processors.postProcessor?this._processors.postProcessor.call(null,e):e}}),Object.defineProperty(n.prototype,"_fixNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;mr(e.type,this,"create");var i=e.getSnapshot;e.getSnapshot=function(){return t.postProcessSnapshot(i.call(e))},Rr(this._subtype)||(e.getReconciliationType=function(){return t})}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){var o=v(a)?a:this.preProcessSnapshot(a),u=this._subtype.instantiate(e,t,i,o);return this._fixNode(u),u}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){var o=this._subtype.reconcile(e,v(t)?t:this.preProcessSnapshot(t),i,a);return o!==e&&this._fixNode(o),o}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){t===void 0&&(t=!0);var i=this._subtype.getSnapshot(e);return t?this.postProcessSnapshot(i):i}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this.preProcessSnapshotSafe(e);return i===Se?S(t,e,"Failed to preprocess value"):this._subtype.validate(i,t)}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),Object.defineProperty(n.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=E(e)?this._subtype:v(e)?tt(e,!1):this.preProcessSnapshotSafe(e);return t===Se?!1:this._subtype.validate(t,[{path:"",type:this._subtype}]).length===0}}),Object.defineProperty(n.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._subtype.isAssignableFrom(e)}}),Object.defineProperty(n.prototype,"isMatchingSnapshotId",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!(this._subtype instanceof J))return!1;var i=this.preProcessSnapshot(t);return this._subtype.isMatchingSnapshotId(e,i)}}),n}(x);function mr(r,n){for(var e,t,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];try{for(var o=se(i),u=o.next();!u.done;u=o.next()){var l=u.value;r[l]=n[l].bind(n)}}catch(s){e={error:s}}finally{try{u&&!u.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}function gr(r,n,e){if(V(r,1),d()){if(n.postProcessor&&typeof n.postProcessor!="function")throw fail("postSnapshotProcessor must be a function");if(n.preProcessor&&typeof n.preProcessor!="function")throw fail("preSnapshotProcessor must be a function")}return new yr(r,n,e)}var _e="Map.put can only be used to store complex values that have an identifier type attribute";function mt(r,n){var e,t,i=r.getSubTypes();if(i===it)return!1;if(i){var a=xe(i);try{for(var o=se(a),u=o.next();!u.done;u=o.next()){var l=u.value;if(!mt(l,n))return!1}}catch(s){e={error:s}}finally{try{u&&!u.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}return r instanceof re&&n.push(r),!0}var R;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.YES=1]="YES",r[r.NO=2]="NO"})(R||(R={}));var wr=function(r){y(n,r);function n(e){return r.call(this,e,H.ref.enhancer)||this}return Object.defineProperty(n.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return r.prototype.get.call(this,""+e)}}),Object.defineProperty(n.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return r.prototype.has.call(this,""+e)}}),Object.defineProperty(n.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return r.prototype.delete.call(this,""+e)}}),Object.defineProperty(n.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return r.prototype.set.call(this,""+e,t)}}),Object.defineProperty(n.prototype,"put",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)throw f("Map.put cannot be used to set empty values");if(v(e)){var t=c(e);if(d()&&!t.identifierAttribute||t.identifier===null)throw f(_e);return this.set(t.identifier,e),e}else if(pt(e)){var i=c(this),a=i.type;if(a.identifierMode!==R.YES)throw f(_e);var o=a.mapIdentifierAttribute,u=e[o];if(!Re(u)){var l=this.put(a.getChildType().create(e,i.environment));return this.put(tt(l))}var s=ne(u);return this.set(s,e),this.get(s)}else throw f("Map.put can only be used to store complex values")}}),n}(Fe),fe=function(r){y(n,r);function n(e,t,i){i===void 0&&(i=[]);var a=r.call(this,e)||this;return Object.defineProperty(a,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(a,"identifierMode",{enumerable:!0,configurable:!0,writable:!0,value:R.UNKNOWN}),Object.defineProperty(a,"mapIdentifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"flags",{enumerable:!0,configurable:!0,writable:!0,value:b.Map}),Object.defineProperty(a,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),a._determineIdentifierMode(),a.hookInitializers=i,a}return Object.defineProperty(n.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.hookInitializers.length>0?this.hookInitializers.concat(e):[e];return new n(this.name,this._subType,t)}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){return this._determineIdentifierMode(),Ne(this,e,t,i,a)}}),Object.defineProperty(n.prototype,"_determineIdentifierMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.identifierMode===R.UNKNOWN){var e=[];if(mt(this._subType,e)){var t=e.reduce(function(i,a){if(!a.identifierAttribute)return i;if(i&&i!==a.identifierAttribute)throw f("The objects in a map should all have the same identifier attribute, expected '"+i+"', but child of type '"+a.name+"' declared attribute '"+a.identifierAttribute+"' as identifier");return a.identifierAttribute},void 0);t?(this.identifierMode=R.YES,this.mapIdentifierAttribute=t):this.identifierMode=R.NO}}}}),Object.defineProperty(n.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){t===void 0&&(t={});var i=e.type._subType,a={};return Object.keys(t).forEach(function(o){a[o]=i.instantiate(e,o,void 0,t[o])}),a}}),Object.defineProperty(n.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new wr(e)}}),Object.defineProperty(n.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){ye(t,e.unbox);var i=e.type;i.hookInitializers.forEach(function(a){var o=a(t);Object.keys(o).forEach(function(u){var l=o[u],s=te(t,u,l);(d()?le:U)(t,u,s)})}),oe(t,this.willChange),ue(t,this.didChange)}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"Map<string, "+this._subType.describe()+">"}}),Object.defineProperty(n.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return me(e.storedValue)}}),Object.defineProperty(n.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=e.storedValue.get(""+t);if(!i)throw f("Not a child "+t);return i}}),Object.defineProperty(n.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=c(e.object),i=e.name;t.assertWritable({subpath:i});var a=t.type,o=a._subType;switch(e.type){case"update":{var u=e.newValue,l=e.object.get(i);if(u===l)return null;C(o,u),e.newValue=o.reconcile(t.getChildNode(i),e.newValue,t,i),a.processIdentifier(i,e.newValue)}break;case"add":C(o,e.newValue),e.newValue=o.instantiate(t,i,void 0,e.newValue),a.processIdentifier(i,e.newValue);break}return e}}),Object.defineProperty(n.prototype,"processIdentifier",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this.identifierMode===R.YES&&t instanceof O){var i=t.identifier;if(i!==e)throw f("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '"+i+"', but expected: '"+e+"'")}}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={};return e.getChildren().forEach(function(i){t[i.subpath]=i.snapshot}),t}}),Object.defineProperty(n.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={};return Object.keys(e).forEach(function(i){t[i]=e[i].getSnapshot()}),t}}),Object.defineProperty(n.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=c(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:L(e.name),value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"add":return void t.emitPatch({op:"add",path:L(e.name),value:e.newValue.snapshot,oldValue:void 0},t);case"delete":var i=e.oldValue.snapshot;return e.oldValue.die(),void t.emitPatch({op:"remove",path:L(e.name),oldValue:i},t)}}}),Object.defineProperty(n.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var a=e.storedValue;switch(i.op){case"add":case"replace":a.set(t,i.value);break;case"remove":a.delete(t);break}}}),Object.defineProperty(n.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){C(this,t);var i=e.storedValue,a={};if(Array.from(i.keys()).forEach(function(u){a[u]=!1}),t)for(var o in t)i.set(o,t[o]),a[""+o]=!0;Object.keys(a).forEach(function(u){a[u]===!1&&i.delete(u)})}}),Object.defineProperty(n.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;return z(e)?pe(Object.keys(e).map(function(a){return i._subType.validate(e[a],De(t,a,i._subType))})):S(t,e,"Value is not a plain object")}}),Object.defineProperty(n.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Z}}),Object.defineProperty(n.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.storedValue.delete(t)}}),n}(J);fe.prototype.applySnapshot=I(fe.prototype.applySnapshot);function Pr(r){return new fe("map<string, "+r.name+">",r)}var ce=function(r){y(n,r);function n(e,t,i){i===void 0&&(i=[]);var a=r.call(this,e)||this;return Object.defineProperty(a,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(a,"flags",{enumerable:!0,configurable:!0,writable:!0,value:b.Array}),Object.defineProperty(a,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),a.hookInitializers=i,a}return Object.defineProperty(n.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.hookInitializers.length>0?this.hookInitializers.concat(e):[e];return new n(this.name,this._subType,t)}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){return Ne(this,e,t,i,a)}}),Object.defineProperty(n.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){t===void 0&&(t=[]);var i=e.type._subType,a={};return t.forEach(function(o,u){var l=""+u;a[l]=i.instantiate(e,l,void 0,o)}),a}}),Object.defineProperty(n.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return H.array(ft(e),be)}}),Object.defineProperty(n.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){Pe(t).dehancer=e.unbox;var i=e.type;i.hookInitializers.forEach(function(a){var o=a(t);Object.keys(o).forEach(function(u){var l=o[u],s=te(t,u,l);(d()?le:U)(t,u,s)})}),oe(t,this.willChange),ue(t,this.didChange)}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType.describe()+"[]"}}),Object.defineProperty(n.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue.slice()}}),Object.defineProperty(n.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=Number(t);if(i<e.storedValue.length)return e.storedValue[i];throw f("Not a child: "+t)}}),Object.defineProperty(n.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=c(e.object);t.assertWritable({subpath:""+e.index});var i=t.type._subType,a=t.getChildren();switch(e.type){case"update":{if(e.newValue===e.object[e.index])return null;var o=Je(t,i,[a[e.index]],[e.newValue],[e.index]);if(!o)return null;e.newValue=o[0]}break;case"splice":{var u=e.index,l=e.removedCount,s=e.added,p=Je(t,i,a.slice(u,u+l),s,s.map(function(w,P){return u+P}));if(!p)return null;e.added=p;for(var h=u+l;h<a.length;h++)a[h].setParent(t,""+(h+s.length-l))}break}return e}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.getChildren().map(function(t){return t.snapshot})}}),Object.defineProperty(n.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=[];return Object.keys(e).forEach(function(i){t.push(e[i].getSnapshot())}),t}}),Object.defineProperty(n.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=c(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:""+e.index,value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"splice":for(var i=e.removedCount-1;i>=0;i--)t.emitPatch({op:"remove",path:""+(e.index+i),oldValue:e.removed[i].snapshot},t);for(var i=0;i<e.addedCount;i++)t.emitPatch({op:"add",path:""+(e.index+i),value:t.getChildNode(""+(e.index+i)).snapshot,oldValue:void 0},t);return}}}),Object.defineProperty(n.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var a=e.storedValue,o=t==="-"?a.length:Number(t);switch(i.op){case"replace":a[o]=i.value;break;case"add":a.splice(o,0,i.value);break;case"remove":a.splice(o,1);break}}}),Object.defineProperty(n.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){C(this,t);var i=e.storedValue;i.replace(t)}}),Object.defineProperty(n.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;return ct(e)?pe(e.map(function(a,o){return i._subType.validate(a,De(t,""+o,i._subType))})):S(t,e,"Value is not an array")}}),Object.defineProperty(n.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return B}}),Object.defineProperty(n.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.storedValue.splice(Number(t),1)}}),n}(J);ce.prototype.applySnapshot=I(ce.prototype.applySnapshot);function Or(r){return V(r,1),new ce(r.name+"[]",r)}function Je(r,n,e,t,i){for(var a=!0,o=0;;o++){var u=o<=t.length-1,l=e[o],s=u?t[o]:void 0,p=""+i[o];if(Xt(s)&&(s=s.storedValue),!l&&!u)break;if(!u)a=!1,e.splice(o,1),l instanceof O&&l.createObservableInstanceIfNeeded(),l.die(),o--;else if(l)if(Be(l,s))e[o]=Ie(n,r,p,s,l);else{for(var w=void 0,P=o;P<e.length;P++)if(Be(e[P],s)){w=e.splice(P,1)[0];break}a=!1;var h=Ie(n,r,p,s,w);e.splice(o,0,h)}else{if(v(s)&&c(s).parent===r)throw f("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+r.path+"/"+p+"', but it lives already at '"+c(s).path+"'");a=!1;var h=Ie(n,r,p,s);e.splice(o,0,h)}}return a?null:e}function Ie(r,n,e,t,i){C(r,t);function a(){if(v(t)){var u=c(t);if(u.assertAlive(Z),u.parent!==null&&u.parent===n)return u.setParent(n,e),u}return i?r.reconcile(i,t,n,e):r.instantiate(n,e,void 0,t)}var o=a();return i&&i!==o&&(i instanceof O&&i.createObservableInstanceIfNeeded(),i.die()),o}function Be(r,n){if(!r.isAlive)return!1;if(v(n)){var e=c(n);return e.isAlive&&e===r}if(r.snapshot===n)return!0;if(!(r instanceof O))return!1;var t=r.getReconciliationType();return r.identifier!==null&&r.identifierAttribute&&z(n)&&t.is(n)&&t.isMatchingSnapshotId(r,n)}var Ze="preProcessSnapshot",Ke="postProcessSnapshot";function jr(){return c(this).toString()}var qe={name:"AnonymousModel",properties:{},initializers:B};function Sr(r){return Object.keys(r).reduce(function(n,e){var t,i,a;if(e in g)throw f("Hook '"+e+"' was defined as property. Hooks should be defined as part of the actions");var o=Object.getOwnPropertyDescriptor(n,e);if("get"in o)throw f("Getters are not supported as properties. Please use views instead");var u=o.value;if(u==null)throw f("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");if(M(u))return Object.assign({},n,(t={},t[e]=F(Tr(u),u),t));if(u instanceof fe)return Object.assign({},n,(i={},i[e]=F(u,{}),i));if(u instanceof ce)return Object.assign({},n,(a={},a[e]=F(u,[]),a));if(E(u))return n;throw d()&&typeof u=="function"?f("Invalid type definition for property '"+e+"', it looks like you passed a function. Did you forget to invoke it, or did you intend to declare a view / action?"):d()&&typeof u=="object"?f("Invalid type definition for property '"+e+"', it looks like you passed an object. Try passing another model type or a types.frozen."):f("Invalid type definition for property '"+e+"', cannot infer a type from a value like '"+u+"' ("+typeof u+")")},r)}var re=function(r){y(n,r);function n(e){var t=r.call(this,e.name||qe.name)||this;return Object.defineProperty(t,"flags",{enumerable:!0,configurable:!0,writable:!0,value:b.Object}),Object.defineProperty(t,"initializers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"properties",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"preProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"postProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"propertyNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"named",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return t.cloneAndEnhance({name:i})}}),Object.defineProperty(t,"props",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return t.cloneAndEnhance({properties:i})}}),Object.defineProperty(t,"preProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(i){var a=t.preProcessor;return a?t.cloneAndEnhance({preProcessor:function(o){return a(i(o))}}):t.cloneAndEnhance({preProcessor:i})}}),Object.defineProperty(t,"postProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(i){var a=t.postProcessor;return a?t.cloneAndEnhance({postProcessor:function(o){return i(a(o))}}):t.cloneAndEnhance({postProcessor:i})}}),Object.assign(t,qe,e),t.properties=Sr(t.properties),K(t.properties),t.propertyNames=Object.keys(t.properties),t.identifierAttribute=t._getIdentifierAttribute(),t}return Object.defineProperty(n.prototype,"_getIdentifierAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=void 0;return this.forAllProps(function(t,i){if(i.flags&b.Identifier){if(e)throw f("Cannot define property '"+t+"' as object identifier, property '"+e+"' is already defined as identifier property");e=t}}),e}}),Object.defineProperty(n.prototype,"cloneAndEnhance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new n({name:e.name||this.name,properties:Object.assign({},this.properties,e.properties),initializers:this.initializers.concat(e.initializers||[]),preProcessor:e.preProcessor||this.preProcessor,postProcessor:e.postProcessor||this.postProcessor})}}),Object.defineProperty(n.prototype,"actions",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,i=function(a){return t.instantiateActions(a,e(a)),a};return this.cloneAndEnhance({initializers:[i]})}}),Object.defineProperty(n.prototype,"instantiateActions",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!z(t))throw f("actions initializer should return a plain object containing actions");Object.keys(t).forEach(function(i){if(i===Ze)throw f("Cannot define action '"+Ze+"', it should be defined using 'type.preProcessSnapshot(fn)' instead");if(i===Ke)throw f("Cannot define action '"+Ke+"', it should be defined using 'type.postProcessSnapshot(fn)' instead");var a=t[i],o=e[i];if(i in g&&o){var u=a;a=function(){o.apply(null,arguments),u.apply(null,arguments)}}var l=a.$mst_middleware,s=a.bind(t);s.$mst_middleware=l;var p=te(e,i,s);t[i]=p,(d()?le:U)(e,i,p)})}}),Object.defineProperty(n.prototype,"volatile",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(typeof e!="function")throw f("You passed an "+typeof e+" to volatile state as an argument, when function is expected");var i=function(a){return t.instantiateVolatileState(a,e(a)),a};return this.cloneAndEnhance({initializers:[i]})}}),Object.defineProperty(n.prototype,"instantiateVolatileState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!z(t))throw f("volatile state initializer should return a plain object containing state");Ue(e,t)}}),Object.defineProperty(n.prototype,"extend",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,i=function(a){var o=e(a),u=o.actions,l=o.views,s=o.state,p=Rt(o,["actions","views","state"]);for(var h in p)throw f("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '"+h+"'");return s&&t.instantiateVolatileState(a,s),l&&t.instantiateViews(a,l),u&&t.instantiateActions(a,u),a};return this.cloneAndEnhance({initializers:[i]})}}),Object.defineProperty(n.prototype,"views",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,i=function(a){return t.instantiateViews(a,e(a)),a};return this.cloneAndEnhance({initializers:[i]})}}),Object.defineProperty(n.prototype,"instantiateViews",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!z(t))throw f("views initializer should return a plain object containing views");Object.getOwnPropertyNames(t).forEach(function(i){var a,o=Object.getOwnPropertyDescriptor(t,i);if("get"in o)ge(e,i,o),Le(e,(a={},a[i]=ve,a));else if(typeof o.value=="function")(d()?le:U)(e,i,o.value);else throw f("A view member should either be a function or getter based property")})}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){var o=v(a)?a:this.applySnapshotPreProcessor(a);return Ne(this,e,t,i,o)}}),Object.defineProperty(n.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){t===void 0&&(t={});var i=e.type,a={};return i.forAllProps(function(o,u){a[o]=u.instantiate(e,o,void 0,t[o])}),a}}),Object.defineProperty(n.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return H.object(e,Z,be)}}),Object.defineProperty(n.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){U(t,"toString",jr),this.forAllProps(function(i){ye(t,i,e.unbox)}),this.initializers.reduce(function(i,a){return a(i)},t),oe(t,this.willChange),ue(t,this.didChange)}}),Object.defineProperty(n.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e,i=c(t.object),a=t.name;i.assertWritable({subpath:a});var o=i.type.properties[a];return o&&(C(o,t.newValue),t.newValue=o.reconcile(i.getChildNode(a),t.newValue,i,a)),t}}),Object.defineProperty(n.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e,i=c(t.object),a=i.type.properties[t.name];if(!!a){var o=t.oldValue?t.oldValue.snapshot:void 0;i.emitPatch({op:"replace",path:L(t.name),value:t.newValue.snapshot,oldValue:o},i)}}}),Object.defineProperty(n.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,i=[];return this.forAllProps(function(a){i.push(t.getChildNode(e,a))}),i}}),Object.defineProperty(n.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!(t in this.properties))throw f("Not a value property: "+t);var i=Pe(e.storedValue,t),a=i.raw();if(!a)throw f("Node not available for property "+t);return a}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this;t===void 0&&(t=!0);var a={};return this.forAllProps(function(o,u){We(e.storedValue,o).reportObserved(),a[o]=i.getChildNode(e,o).snapshot}),t?this.applySnapshotPostProcessor(a):a}}),Object.defineProperty(n.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={};return Object.keys(e).forEach(function(i){t[i]=e[i].getSnapshot()}),this.applySnapshotPostProcessor(t)}}),Object.defineProperty(n.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){if(!(i.op==="replace"||i.op==="add"))throw f("object does not support operation "+i.op);e.storedValue[t]=i.value}}),Object.defineProperty(n.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this.applySnapshotPreProcessor(t);C(this,i),this.forAllProps(function(a){e.storedValue[a]=i[a]})}}),Object.defineProperty(n.prototype,"applySnapshotPreProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.preProcessor;return t?t.call(null,e):e}}),Object.defineProperty(n.prototype,"applySnapshotPostProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.postProcessor;return t?t.call(null,e):e}}),Object.defineProperty(n.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Ve(e,1),this.properties[e]}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this,a=this.applySnapshotPreProcessor(e);return z(a)?pe(this.propertyNames.map(function(o){return i.properties[o].validate(a[o],De(t,o,i.properties[o]))})):S(t,a,"Value is not a plain object")}}),Object.defineProperty(n.prototype,"forAllProps",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.propertyNames.forEach(function(i){return e(i,t.properties[i])})}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return"{ "+this.propertyNames.map(function(t){return t+": "+e.properties[t].describe()}).join("; ")+" }"}}),Object.defineProperty(n.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Z}}),Object.defineProperty(n.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.storedValue[t]=void 0}}),n}(J);re.prototype.applySnapshot=I(re.prototype.applySnapshot);function _r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var e=typeof r[0]=="string"?r.shift():"AnonymousModel",t=r.shift()||{};return new re({name:e,properties:t})}function Ir(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var e=typeof r[0]=="string",t=e?r[0]:"AnonymousModel";return e&&r.shift(),d()&&r.forEach(function(i,a){A(i,gt,"mobx-state-tree model type",e?a+2:a+1)}),r.reduce(function(i,a){return i.cloneAndEnhance({name:i.name+"_"+a.name,properties:a.properties,initializers:a.initializers,preProcessor:function(o){return a.applySnapshotPreProcessor(i.applySnapshotPreProcessor(o))},postProcessor:function(o){return a.applySnapshotPostProcessor(i.applySnapshotPostProcessor(o))}})}).named(t)}function gt(r){return E(r)&&(r.flags&b.Object)>0}var G=function(r){y(n,r);function n(e,t,i,a){a===void 0&&(a=nr);var o=r.call(this,e)||this;return Object.defineProperty(o,"flags",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(o,"checker",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(o,"initializer",{enumerable:!0,configurable:!0,writable:!0,value:a}),o.flags=t,o}return Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){return W(this,e,t,i,a)}}),Object.defineProperty(n.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.initializer(e)}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(M(e)&&this.checker(e))return j();var i=this.name==="Date"?"Date or a unix milliseconds timestamp":this.name;return S(t,e,"Value is not a "+i)}}),n}(q),wt=new G("string",b.String,function(r){return typeof r=="string"}),Pt=new G("number",b.Number,function(r){return typeof r=="number"}),Ar=new G("integer",b.Integer,function(r){return ir(r)}),Ot=new G("boolean",b.Boolean,function(r){return typeof r=="boolean"}),jt=new G("null",b.Null,function(r){return r===null}),St=new G("undefined",b.Undefined,function(r){return r===void 0}),_t=new G("Date",b.Date,function(r){return typeof r=="number"||r instanceof Date},function(r){return r instanceof Date?r:new Date(r)});_t.getSnapshot=function(r){return r.storedValue.getTime()};var It=_t;function Tr(r){switch(typeof r){case"string":return wt;case"number":return Pt;case"boolean":return Ot;case"object":if(r instanceof Date)return It}throw f("Cannot determine primitive type from value "+r)}function Cr(r){return E(r)&&(r.flags&(b.String|b.Number|b.Integer|b.Boolean|b.Date))>0}var Er=function(r){y(n,r);function n(e){var t=r.call(this,JSON.stringify(e))||this;return Object.defineProperty(t,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"flags",{enumerable:!0,configurable:!0,writable:!0,value:b.Literal}),t.value=e,t}return Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){return W(this,e,t,i,a)}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return JSON.stringify(this.value)}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return M(e)&&e===this.value?j():S(t,e,"Value is not a literal "+JSON.stringify(this.value))}}),n}(q);function At(r){return A(r,M,"primitive",1),new Er(r)}var Dr=function(r){y(n,r);function n(e,t,i,a){var o=r.call(this,e)||this;return Object.defineProperty(o,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(o,"_predicate",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(o,"_message",{enumerable:!0,configurable:!0,writable:!0,value:a}),o}return Object.defineProperty(n.prototype,"flags",{get:function(){return this._subtype.flags|b.Refinement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){return this._subtype.instantiate(e,t,i,a)}}),Object.defineProperty(n.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._subtype.isAssignableFrom(e)}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this._subtype.validate(e,t);if(i.length>0)return i;var a=v(e)?c(e).snapshot:e;return this._predicate(a)?j():S(t,e,this._message(e))}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){return this._subtype.reconcile(e,t,i,a)}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),n}(x);function Nr(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var e=typeof r[0]=="string"?r.shift():E(r[0])?r[0].name:null,t=r[0],i=r[1],a=r[2]?r[2]:function(o){return"Value does not respect the refinement predicate"};return V(t,[1,2]),Ve(e,1),Ce(i,[2,3]),Ce(a,[3,4]),new Dr(e,t,i,a)}function xr(r,n){var e=typeof r=="string"?n:r;d()&&e.forEach(function(i,a){Ve(i,a+1)});var t=de.apply(void 0,$(e.map(function(i){return At(""+i)})));return typeof r=="string"&&(t.name=r),t}var Vr=function(r){y(n,r);function n(e,t,i){var a=r.call(this,e)||this;return Object.defineProperty(a,"_types",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(a,"_dispatcher",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_eager",{enumerable:!0,configurable:!0,writable:!0,value:!0}),i=N({eager:!0,dispatcher:void 0},i),a._dispatcher=i.dispatcher,i.eager||(a._eager=!1),a}return Object.defineProperty(n.prototype,"flags",{get:function(){var e=b.Union;return this._types.forEach(function(t){e|=t.flags}),e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._types.some(function(t){return t.isAssignableFrom(e)})}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"("+this._types.map(function(e){return e.describe()}).join(" | ")+")"}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){var o=this.determineType(a,void 0);if(!o)throw f("No matching type for union "+this.describe());return o.instantiate(e,t,i,a)}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){var o=this.determineType(t,e.getReconciliationType());if(!o)throw f("No matching type for union "+this.describe());return o.reconcile(e,t,i,a)}}),Object.defineProperty(n.prototype,"determineType",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._dispatcher?this._dispatcher(e):t?t.is(e)?t:this._types.filter(function(i){return i!==t}).find(function(i){return i.is(e)}):this._types.find(function(i){return i.is(e)})}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this._dispatcher)return this._dispatcher(e).validate(e,t);for(var i=[],a=0,o=0;o<this._types.length;o++){var u=this._types[o],l=u.validate(e,t);if(l.length===0){if(this._eager)return j();a++}else i.push(l)}return a===1?j():S(t,e,"No type is applicable for the union").concat(pe(i))}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._types}}),n}(x);function de(r){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var t=E(r)?void 0:r,i=E(r)?$([r],n):n,a="("+i.map(function(o){return o.name}).join(" | ")+")";return d()&&(t&&A(t,function(o){return z(o)},"object { eager?: boolean, dispatcher?: Function }",1),i.forEach(function(o,u){V(o,t?u+2:u+1)})),new Vr(a,i,t)}function Rr(r){return(r.flags&b.Union)>0}var zr=function(r){y(n,r);function n(e,t,i){var a=r.call(this,e.name)||this;return Object.defineProperty(a,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(a,"_defaultValue",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(a,"optionalValues",{enumerable:!0,configurable:!0,writable:!0,value:i}),a}return Object.defineProperty(n.prototype,"flags",{get:function(){return this._subtype.flags|b.Optional},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype.describe()+"?"}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){if(this.optionalValues.indexOf(a)>=0){var o=this.getDefaultInstanceOrSnapshot();return this._subtype.instantiate(e,t,i,o)}return this._subtype.instantiate(e,t,i,a)}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){return this._subtype.reconcile(e,this.optionalValues.indexOf(t)<0&&this._subtype.is(t)?t:this.getDefaultInstanceOrSnapshot(),i,a)}}),Object.defineProperty(n.prototype,"getDefaultInstanceOrSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=typeof this._defaultValue=="function"?this._defaultValue():this._defaultValue;return typeof this._defaultValue=="function"&&C(this,e),e}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.optionalValues.indexOf(e)>=0?j():this._subtype.validate(e,t)}}),Object.defineProperty(n.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._subtype.isAssignableFrom(e)}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),n}(x);function Mr(r,n){if(typeof n!="function"&&v(n))throw f("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead");V(r,1),d()&&typeof n!="function"&&C(r,n)}function F(r,n,e){return Mr(r,n),new zr(r,n,e||kr)}var kr=[void 0];var Hr=F(St,void 0),Ur=F(jt,null);function Tt(r){return V(r,1),de(r,Hr)}function Lr(r){return V(r,1),de(r,Ur)}var Fr=function(r){y(n,r);function n(e,t){var i=r.call(this,e)||this;return Object.defineProperty(i,"_definition",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(i,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i}return Object.defineProperty(n.prototype,"flags",{get:function(){return(this._subType?this._subType.flags:0)|b.Late},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"getSubType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this._subType){var t=void 0;try{t=this._definition()}catch(i){if(i instanceof ReferenceError)t=void 0;else throw i}if(e&&t===void 0)throw f("Late type seems to be used too early, the definition (still) returns undefined");if(t){if(d()&&!E(t))throw f("Failed to determine subtype, make sure types.late returns a type definition.");this._subType=t}}return this._subType}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){return this.getSubType(!0).instantiate(e,t,i,a)}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){return this.getSubType(!0).reconcile(e,t,i,a)}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getSubType(!1);return e?e.name:"<uknown late type>"}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this.getSubType(!1);return i?i.validate(e,t):j()}}),Object.defineProperty(n.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.getSubType(!1);return t?t.isAssignableFrom(e):!1}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getSubType(!1);return e||it}}),n}(x);function $r(r,n){var e=typeof r=="string"?r:"late("+r.toString()+")",t=typeof r=="string"?n:r;if(d()&&!(typeof t=="function"&&t.length===0))throw f("Invalid late type, expected a function with zero arguments that returns a type, got: "+t);return new Fr(e,t)}var Ct=function(r){y(n,r);function n(e){var t=r.call(this,e?"frozen("+e.name+")":"frozen")||this;return Object.defineProperty(t,"subType",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(t,"flags",{enumerable:!0,configurable:!0,writable:!0,value:b.Frozen}),t}return Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"<any immutable value>"}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){return W(this,e,t,i,bt(a))}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return or(e)?this.subType?this.subType.validate(e,t):j():S(t,e,"Value is not serializable and cannot be frozen")}}),n}(q),Qe=new Ct;function Wr(r){return arguments.length===0?Qe:E(r)?new Ct(r):F(Qe,r)}function Gr(r){switch(r){case g.beforeDestroy:return"destroy";case g.beforeDetach:return"detach";default:return}}var Yr=function(){function r(n,e){if(Object.defineProperty(this,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolvedReference",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Re(n))this.identifier=n;else if(v(n)){var t=c(n);if(!t.identifierAttribute)throw f("Can only store references with a defined identifier attribute.");var i=t.unnormalizedIdentifier;if(i==null)throw f("Can only store references to tree nodes with a defined identifier.");this.identifier=i}else throw f("Can only store references to tree nodes or identifiers, got: '"+n+"'")}return Object.defineProperty(r.prototype,"updateResolvedReference",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var e=ne(this.identifier),t=n.root,i=t.identifierCache.getLastCacheModificationPerId(e);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==i){var a=this.targetType,o=t.identifierCache.resolve(a,e);if(!o)throw new Jr("[mobx-state-tree] Failed to resolve reference '"+this.identifier+"' to type '"+this.targetType.name+"' (from node: "+n.path+")");this.resolvedReference={node:o,lastCacheModification:i}}}}),Object.defineProperty(r.prototype,"resolvedValue",{get:function(){return this.updateResolvedReference(this.node),this.resolvedReference.node.value},enumerable:!1,configurable:!0}),r}(),Jr=function(r){y(n,r);function n(e){var t=r.call(this,e)||this;return Object.setPrototypeOf(t,n.prototype),t}return n}(Error),Et=function(r){y(n,r);function n(e,t){var i=r.call(this,"reference("+e.name+")")||this;return Object.defineProperty(i,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(i,"onInvalidated",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(i,"flags",{enumerable:!0,configurable:!0,writable:!0,value:b.Reference}),i}return Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(n.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.targetType.isAssignableFrom(e)}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Re(e)?j():S(t,e,"Value is not a valid identifier, which is a string or a number")}}),Object.defineProperty(n.prototype,"fireInvalidated",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){var o=t.parent;if(!(!o||!o.isAlive)){var u=o.storedValue;!u||this.onInvalidated({cause:e,parent:u,invalidTarget:a?a.storedValue:void 0,invalidId:i,replaceRef:function(l){Ge(t.root.storedValue,{op:"replace",value:l,path:t.path})},removeRef:function(){gt(o.type)?this.replaceRef(void 0):Ge(t.root.storedValue,{op:"remove",path:t.path})}})}}}),Object.defineProperty(n.prototype,"addTargetNodeWatcher",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this,a=this.getValue(e);if(!!a){var o=c(a),u=function(p,h){var w=Gr(h);!w||i.fireInvalidated(w,e,t,o)},l=o.registerHook(g.beforeDetach,u),s=o.registerHook(g.beforeDestroy,u);return function(){l(),s()}}}}),Object.defineProperty(n.prototype,"watchTargetNodeForInvalidations",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var a=this;if(!!this.onInvalidated){var o;e.registerHook(g.beforeDestroy,function(){o&&o()});var u=function(l){o&&o();var s=e.parent,p=s&&s.storedValue;if(s&&s.isAlive&&p){var h=void 0;i?h=!!i.get(t,p):h=e.root.identifierCache.has(a.targetType,ne(t)),h?o=a.addTargetNodeWatcher(e,t):l||a.fireInvalidated("invalidSnapshotReference",e,t,null)}};e.state===m.FINALIZED?u(!0):(e.isRoot||e.root.registerHook(g.afterCreationFinalization,function(){e.parent&&e.parent.createObservableInstanceIfNeeded()}),e.registerHook(g.afterAttach,function(){u(!1)}))}}}),n}(q),Br=function(r){y(n,r);function n(e,t){return r.call(this,e,t)||this}return Object.defineProperty(n.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!!e.isAlive){var t=e.storedValue;return t.resolvedValue}}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.storedValue;return t.identifier}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){var o=v(a)?Ht(a):a,u=new Yr(a,this.targetType),l=W(this,e,t,i,u);return u.node=l,this.watchTargetNodeForInvalidations(l,o,void 0),l}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){if(!e.isDetaching&&e.type===this){var o=v(t),u=e.storedValue;if(!o&&u.identifier===t||o&&u.resolvedValue===t)return e.setParent(i,a),e}var l=this.instantiate(i,a,void 0,t);return e.die(),l}}),n}(Et),Zr=function(r){y(n,r);function n(e,t,i){var a=r.call(this,e,i)||this;return Object.defineProperty(a,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),a}return Object.defineProperty(n.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!!e.isAlive){var t=this.options.get(e.storedValue,e.parent?e.parent.storedValue:null);return t}}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){var o=v(a)?this.options.set(a,e?e.storedValue:null):a,u=W(this,e,t,i,o);return this.watchTargetNodeForInvalidations(u,o,this.options),u}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){var o=v(t)?this.options.set(t,e?e.storedValue:null):t;if(!e.isDetaching&&e.type===this&&e.storedValue===o)return e.setParent(i,a),e;var u=this.instantiate(i,a,void 0,o);return e.die(),u}}),n}(Et);function Dt(r,n){if(V(r,1),d()&&arguments.length===2&&typeof arguments[1]=="string")throw f("References with base path are no longer supported. Please remove the base path.");var e=n||void 0,t=n?n.onInvalidated:void 0;if(e&&(e.get||e.set)){if(d()&&(!e.get||!e.set))throw f("reference options must either contain both a 'get' and a 'set' method or none of them");return new Zr(r,{get:e.get,set:e.set},t)}else return new Br(r,t)}function Kr(r,n){var e=Dt(r,N(N({},n),{onInvalidated:function(t){n&&n.onInvalidated&&n.onInvalidated(t),t.removeRef()}}));return n&&n.acceptsUndefined===!1?e:Tt(e)}var Nt=function(r){y(n,r);function n(e,t){var i=r.call(this,e)||this;return Object.defineProperty(i,"validType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(i,"flags",{enumerable:!0,configurable:!0,writable:!0,value:b.Identifier}),i}return Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){if(!e||!(e.type instanceof re))throw f("Identifier types can only be instantiated as direct child of a model type");return W(this,e,t,i,a)}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){if(e.storedValue!==t)throw f("Tried to change identifier from '"+e.storedValue+"' to '"+t+"'. Changing identifiers is not allowed.");return e.setParent(i,a),e}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return typeof e!==this.validType?S(t,e,"Value is not a valid "+this.describe()+", expected a "+this.validType):j()}}),n}(q),qr=function(r){y(n,r);function n(){var e=r.call(this,"identifier","string")||this;return Object.defineProperty(e,"flags",{enumerable:!0,configurable:!0,writable:!0,value:b.Identifier}),e}return Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifier"}}),n}(Nt),Qr=function(r){y(n,r);function n(){return r.call(this,"identifierNumber","number")||this}return Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifierNumber"}}),n}(Nt),Xr=new qr,en=new Qr;function ne(r){return""+r}function Re(r){return typeof r=="string"||typeof r=="number"}function tn(r){return new rn(r)}var rn=function(r){y(n,r);function n(e){var t=r.call(this,e.name)||this;return Object.defineProperty(t,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(t,"flags",{enumerable:!0,configurable:!0,writable:!0,value:b.Custom}),t}return Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this.options.isTargetType(e))return j();var i=this.options.getValidationMessage(e);return i?S(t,e,"Invalid value for type '"+this.name+"': "+i):j()}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.options.toSnapshot(e.storedValue)}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){var o=this.options.isTargetType(a)?a:this.options.fromSnapshot(a,e&&e.root.environment);return W(this,e,t,i,o)}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){var o=!this.options.isTargetType(t);if(!e.isDetaching){var u=e.type===this&&(o?t===e.snapshot:t===e.storedValue);if(u)return e.setParent(i,a),e}var l=o?this.options.fromSnapshot(t,i.root.environment):t,s=this.instantiate(i,a,void 0,l);return e.die(),s}}),n}(q),mn={enumeration:xr,model:_r,compose:Ir,custom:tn,reference:Dt,safeReference:Kr,union:de,optional:F,literal:At,maybe:Tt,maybeNull:Lr,refinement:Nr,string:wt,boolean:Ot,number:Pt,integer:Ar,Date:It,map:Pr,array:Or,frozen:Wr,identifier:Xr,identifierNumber:en,late:$r,undefined:St,null:jt,snapshotProcessor:gr};export{un as a,sn as b,ln as c,tt as d,fn as e,cn as f,Mt as g,pn as h,bn as i,dn as j,vn as k,yn as l,mn as m};
/*! For license information please see /build-v1/_shared/chunk-JU7SZQRR.js.LEGAL.txt */
