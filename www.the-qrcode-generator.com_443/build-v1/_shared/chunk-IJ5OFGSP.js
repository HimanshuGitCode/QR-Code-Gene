import{A as p,B as A,C as tt,D as et,E as st,I as v,J as y,K as nt,M as N,O as b,n as Q,q as C,r as k,z as Z}from"/build-v1/_shared/chunk-MJITJCO4.js";var at="@firebase/installations",B="0.6.1";var ot=1e4,ct=`w:${B}`,ut="FIS_v2",yt="https://firebaseinstallations.googleapis.com/v1",Ft=60*60*1e3,kt="installations",Mt="Installations";var Pt={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},T=new k(kt,Mt,Pt);function lt(e){return e instanceof C&&e.code.includes("request-failed")}function gt({projectId:e}){return`${yt}/projects/${e}/installations`}function ft(e){return{token:e.token,requestStatus:2,expiresIn:Rt(e.expiresIn),creationTime:Date.now()}}async function ht(e,t){let n=(await t.json()).error;return T.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function dt({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Ot(e,{refreshToken:t}){let s=dt(e);return s.append("Authorization",Lt(t)),s}async function pt(e){let t=await e();return t.status>=500&&t.status<600?e():t}function Rt(e){return Number(e.replace("s","000"))}function Lt(e){return`${ut} ${e}`}async function Nt({appConfig:e,heartbeatServiceProvider:t},{fid:s}){let n=gt(e),r=dt(e),i=t.getImmediate({optional:!0});if(i){let o=await i.getHeartbeatsHeader();o&&r.append("x-firebase-client",o)}let c={fid:s,authVersion:ut,appId:e.appId,sdkVersion:ct},u={method:"POST",headers:r,body:JSON.stringify(c)},a=await pt(()=>fetch(n,u));if(a.ok){let o=await a.json();return{fid:o.fid||s,registrationStatus:2,refreshToken:o.refreshToken,authToken:ft(o.authToken)}}else throw await ht("Create Installation",a)}function mt(e){return new Promise(t=>{setTimeout(t,e)})}function Dt(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}var jt=/^[cdef][\w-]{21}$/,q="";function qt(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let s=Bt(e);return jt.test(s)?s:q}catch{return q}}function Bt(e){return Dt(e).substr(0,22)}function P(e){return`${e.appName}!${e.appId}`}var wt=new Map;function Tt(e,t){let s=P(e);_t(s,t),$t(s,t)}function _t(e,t){let s=wt.get(e);if(!!s)for(let n of s)n(t)}function $t(e,t){let s=Ut();s&&s.postMessage({key:e,fid:t}),xt()}var w=null;function Ut(){return!w&&"BroadcastChannel"in self&&(w=new BroadcastChannel("[Firebase] FID Change"),w.onmessage=e=>{_t(e.data.key,e.data.fid)}),w}function xt(){wt.size===0&&w&&(w.close(),w=null)}var Vt="firebase-installations-database",Kt=1,_="firebase-installations-store",D=null;function $(){return D||(D=st(Vt,Kt,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(_)}}})),D}async function M(e,t){let s=P(e),r=(await $()).transaction(_,"readwrite"),i=r.objectStore(_),c=await i.get(s);return await i.put(t,s),await r.done,(!c||c.fid!==t.fid)&&Tt(e,t.fid),t}async function It(e){let t=P(e),n=(await $()).transaction(_,"readwrite");await n.objectStore(_).delete(t),await n.done}async function O(e,t){let s=P(e),r=(await $()).transaction(_,"readwrite"),i=r.objectStore(_),c=await i.get(s),u=t(c);return u===void 0?await i.delete(s):await i.put(u,s),await r.done,u&&(!c||c.fid!==u.fid)&&Tt(e,u.fid),u}async function U(e){let t,s=await O(e.appConfig,n=>{let r=zt(n),i=Ht(e,r);return t=i.registrationPromise,i.installationEntry});return s.fid===q?{installationEntry:await t}:{installationEntry:s,registrationPromise:t}}function zt(e){let t=e||{fid:qt(),registrationStatus:0};return St(t)}function Ht(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject(T.create("app-offline"));return{installationEntry:t,registrationPromise:r}}let s={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=Gt(e,s);return{installationEntry:s,registrationPromise:n}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:Jt(e)}:{installationEntry:t}}async function Gt(e,t){try{let s=await Nt(e,t);return M(e.appConfig,s)}catch(s){throw lt(s)&&s.customData.serverCode===409?await It(e.appConfig):await M(e.appConfig,{fid:t.fid,registrationStatus:0}),s}}async function Jt(e){let t=await rt(e.appConfig);for(;t.registrationStatus===1;)await mt(100),t=await rt(e.appConfig);if(t.registrationStatus===0){let{installationEntry:s,registrationPromise:n}=await U(e);return n||s}return t}function rt(e){return O(e,t=>{if(!t)throw T.create("installation-not-found");return St(t)})}function St(e){return Yt(e)?{fid:e.fid,registrationStatus:0}:e}function Yt(e){return e.registrationStatus===1&&e.registrationTime+ot<Date.now()}async function Wt({appConfig:e,heartbeatServiceProvider:t},s){let n=Xt(e,s),r=Ot(e,s),i=t.getImmediate({optional:!0});if(i){let o=await i.getHeartbeatsHeader();o&&r.append("x-firebase-client",o)}let c={installation:{sdkVersion:ct,appId:e.appId}},u={method:"POST",headers:r,body:JSON.stringify(c)},a=await pt(()=>fetch(n,u));if(a.ok){let o=await a.json();return ft(o)}else throw await ht("Generate Auth Token",a)}function Xt(e,{fid:t}){return`${gt(e)}/${t}/authTokens:generate`}async function x(e,t=!1){let s,n=await O(e.appConfig,i=>{if(!bt(i))throw T.create("not-registered");let c=i.authToken;if(!t&&te(c))return i;if(c.requestStatus===1)return s=Qt(e,t),i;{if(!navigator.onLine)throw T.create("app-offline");let u=se(i);return s=Zt(e,u),u}});return s?await s:n.authToken}async function Qt(e,t){let s=await it(e.appConfig);for(;s.authToken.requestStatus===1;)await mt(100),s=await it(e.appConfig);let n=s.authToken;return n.requestStatus===0?x(e,t):n}function it(e){return O(e,t=>{if(!bt(t))throw T.create("not-registered");let s=t.authToken;return ne(s)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function Zt(e,t){try{let s=await Wt(e,t),n=Object.assign(Object.assign({},t),{authToken:s});return await M(e.appConfig,n),s}catch(s){if(lt(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await It(e.appConfig);else{let n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await M(e.appConfig,n)}throw s}}function bt(e){return e!==void 0&&e.registrationStatus===2}function te(e){return e.requestStatus===2&&!ee(e)}function ee(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Ft}function se(e){let t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function ne(e){return e.requestStatus===1&&e.requestTime+ot<Date.now()}async function re(e){let t=e,{installationEntry:s,registrationPromise:n}=await U(t);return n?n.catch(console.error):x(t).catch(console.error),s.fid}async function ie(e,t=!1){let s=e;return await ae(s),(await x(s,t)).token}async function ae(e){let{registrationPromise:t}=await U(e);t&&await t}function oe(e){if(!e||!e.options)throw j("App Configuration");if(!e.name)throw j("App Name");let t=["projectId","apiKey","appId"];for(let s of t)if(!e.options[s])throw j(s);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function j(e){return T.create("missing-app-config-values",{valueName:e})}var Et="installations",ce="installations-internal",ue=e=>{let t=e.getProvider("app").getImmediate(),s=oe(t),n=y(t,"heartbeat");return{app:t,appConfig:s,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},le=e=>{let t=e.getProvider("app").getImmediate(),s=y(t,Et).getImmediate();return{getId:()=>re(s),getToken:r=>ie(s,r)}};function ge(){v(new A(Et,ue,"PUBLIC")),v(new A(ce,le,"PRIVATE"))}ge();b(at,B);b(at,B,"esm2017");var V="@firebase/remote-config",Ct="0.4.1";var K=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var vt="remote-config";var fe={["registration-window"]:"Undefined window object. This SDK only supports usage in a browser environment.",["registration-project-id"]:"Undefined project identifier. Check Firebase app initialization.",["registration-api-key"]:"Undefined API key. Check Firebase app initialization.",["registration-app-id"]:"Undefined app identifier. Check Firebase app initialization.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",["fetch-client-network"]:"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-timeout"]:'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',["fetch-throttle"]:'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',["fetch-client-parse"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["indexed-db-unavailable"]:"Indexed DB is not supported by current browser"},l=new k("remoteconfig","Remote Config",fe);function he(e,t){return e instanceof C&&e.code.indexOf(t)!==-1}var de=!1,pe="",At=0,me=["1","true","t","yes","y","on"],F=class{constructor(t,s=pe){this._source=t,this._value=s}asString(){return this._value}asBoolean(){return this._source==="static"?de:me.indexOf(this._value.toLowerCase())>=0}asNumber(){if(this._source==="static")return At;let t=Number(this._value);return isNaN(t)&&(t=At),t}getSource(){return this._source}};function xe(e=N()){return e=p(e),y(e,vt).getImmediate()}async function we(e){let t=p(e),[s,n]=await Promise.all([t._storage.getLastSuccessfulFetchResponse(),t._storage.getActiveConfigEtag()]);return!s||!s.config||!s.eTag||s.eTag===n?!1:(await Promise.all([t._storageCache.setActiveConfig(s.config),t._storage.setActiveConfigEtag(s.eTag)]),!0)}function Te(e){let t=p(e);return t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0})),t._initializePromise}async function _e(e){let t=p(e),s=new K;setTimeout(async()=>{s.abort()},t.settings.fetchTimeoutMillis);try{await t._client.fetch({cacheMaxAgeMillis:t.settings.minimumFetchIntervalMillis,signal:s}),await t._storageCache.setLastFetchStatus("success")}catch(n){let r=he(n,"fetch-throttle")?"throttle":"failure";throw await t._storageCache.setLastFetchStatus(r),n}}function Ve(e){let t=p(e);return Se(t._storageCache.getActiveConfig(),t.defaultConfig).reduce((s,n)=>(s[n]=Ie(e,n),s),{})}function Ie(e,t){let s=p(e);s._isInitializationComplete||s._logger.debug(`A value was requested for key "${t}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);let n=s._storageCache.getActiveConfig();return n&&n[t]!==void 0?new F("remote",n[t]):s.defaultConfig&&s.defaultConfig[t]!==void 0?new F("default",String(s.defaultConfig[t])):(s._logger.debug(`Returning static value for key "${t}". Define a default or remote value if this is unintentional.`),new F("static"))}function Se(e={},t={}){return Object.keys(Object.assign(Object.assign({},e),t))}var z=class{constructor(t,s,n,r){this.client=t,this.storage=s,this.storageCache=n,this.logger=r}isCachedDataFresh(t,s){if(!s)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let n=Date.now()-s,r=n<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${r}.`),r}async fetch(t){let[s,n]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(n&&this.isCachedDataFresh(t.cacheMaxAgeMillis,s))return n;t.eTag=n&&n.eTag;let r=await this.client.fetch(t),i=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return r.status===200&&i.push(this.storage.setLastSuccessfulFetchResponse(r)),await Promise.all(i),r}};function be(e=navigator){return e.languages&&e.languages[0]||e.language}var H=class{constructor(t,s,n,r,i,c){this.firebaseInstallations=t,this.sdkVersion=s,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=c}async fetch(t){let[s,n]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),i=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:s,app_instance_id_token:n,app_id:this.appId,language_code:be()},a={method:"POST",headers:c,body:JSON.stringify(u)},o=fetch(i,a),g=new Promise((f,d)=>{t.signal.addEventListener(()=>{let X=new Error("The operation was aborted.");X.name="AbortError",d(X)})}),m;try{await Promise.race([o,g]),m=await o}catch(f){let d="fetch-client-network";throw f?.name==="AbortError"&&(d="fetch-timeout"),l.create(d,{originalErrorMessage:f?.message})}let h=m.status,L=m.headers.get("ETag")||void 0,S,E;if(m.status===200){let f;try{f=await m.json()}catch(d){throw l.create("fetch-client-parse",{originalErrorMessage:d?.message})}S=f.entries,E=f.state}if(E==="INSTANCE_STATE_UNSPECIFIED"?h=500:E==="NO_CHANGE"?h=304:(E==="NO_TEMPLATE"||E==="EMPTY_CONFIG")&&(S={}),h!==304&&h!==200)throw l.create("fetch-status",{httpStatus:h});return{status:h,eTag:L,config:S}}};function Ee(e,t){return new Promise((s,n)=>{let r=Math.max(t-Date.now(),0),i=setTimeout(s,r);e.addEventListener(()=>{clearTimeout(i),n(l.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Ce(e){if(!(e instanceof C)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var G=class{constructor(t,s){this.client=t,this.storage=s}async fetch(t){let s=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(t,s)}async attemptFetch(t,{throttleEndTimeMillis:s,backoffCount:n}){await Ee(t.signal,s);try{let r=await this.client.fetch(t);return await this.storage.deleteThrottleMetadata(),r}catch(r){if(!Ce(r))throw r;let i={throttleEndTimeMillis:Date.now()+Z(n),backoffCount:n+1};return await this.storage.setThrottleMetadata(i),this.attemptFetch(t,i)}}};var Ae=60*1e3,ve=12*60*60*1e3,J=class{constructor(t,s,n,r,i){this.app=t,this._client=s,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:Ae,minimumFetchIntervalMillis:ve},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function R(e,t){let s=e.target.error||void 0;return l.create(t,{originalErrorMessage:s&&s?.message})}var I="app_namespace_store",ye="firebase_remote_config",Fe=1;function ke(){return new Promise((e,t)=>{try{let s=indexedDB.open(ye,Fe);s.onerror=n=>{t(R(n,"storage-open"))},s.onsuccess=n=>{e(n.target.result)},s.onupgradeneeded=n=>{let r=n.target.result;switch(n.oldVersion){case 0:r.createObjectStore(I,{keyPath:"compositeKey"})}}}catch(s){t(l.create("storage-open",{originalErrorMessage:s?.message}))}})}var Y=class{constructor(t,s,n,r=ke()){this.appId=t,this.appName=s,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(t){let s=await this.openDbPromise;return new Promise((n,r)=>{let c=s.transaction([I],"readonly").objectStore(I),u=this.createCompositeKey(t);try{let a=c.get(u);a.onerror=o=>{r(R(o,"storage-get"))},a.onsuccess=o=>{let g=o.target.result;n(g?g.value:void 0)}}catch(a){r(l.create("storage-get",{originalErrorMessage:a?.message}))}})}async set(t,s){let n=await this.openDbPromise;return new Promise((r,i)=>{let u=n.transaction([I],"readwrite").objectStore(I),a=this.createCompositeKey(t);try{let o=u.put({compositeKey:a,value:s});o.onerror=g=>{i(R(g,"storage-set"))},o.onsuccess=()=>{r()}}catch(o){i(l.create("storage-set",{originalErrorMessage:o?.message}))}})}async delete(t){let s=await this.openDbPromise;return new Promise((n,r)=>{let c=s.transaction([I],"readwrite").objectStore(I),u=this.createCompositeKey(t);try{let a=c.delete(u);a.onerror=o=>{r(R(o,"storage-delete"))},a.onsuccess=()=>{n()}}catch(a){r(l.create("storage-delete",{originalErrorMessage:a?.message}))}})}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}};var W=class{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){let t=this.storage.getLastFetchStatus(),s=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),r=await t;r&&(this.lastFetchStatus=r);let i=await s;i&&(this.lastSuccessfulFetchTimestampMillis=i);let c=await n;c&&(this.activeConfig=c)}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}};function Me(){v(new A(vt,e,"PUBLIC").setMultipleInstances(!0)),b(V,Ct),b(V,Ct,"esm2017");function e(t,{instanceIdentifier:s}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw l.create("registration-window");if(!Q())throw l.create("indexed-db-unavailable");let{projectId:i,apiKey:c,appId:u}=n.options;if(!i)throw l.create("registration-project-id");if(!c)throw l.create("registration-api-key");if(!u)throw l.create("registration-app-id");s=s||"firebase";let a=new Y(u,n.name,s),o=new W(a),g=new et(V);g.logLevel=tt.ERROR;let m=new H(r,nt,s,i,c,u),h=new G(m,a),L=new z(h,a,o,g),S=new J(n,L,o,a,g);return Te(S),S}}async function Ke(e){return e=p(e),await _e(e),we(e)}Me();export{xe as a,Ve as b,Ie as c,Ke as d};
/*! For license information please see /build-v1/_shared/chunk-IJ5OFGSP.js.LEGAL.txt */
