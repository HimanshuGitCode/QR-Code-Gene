import{a as Q}from"/build-v1/_shared/chunk-33GXFLPR.js";import{a as X}from"/build-v1/_shared/chunk-EXPI5T2H.js";import"/build-v1/_shared/chunk-NLOXWVRM.js";import{a as B}from"/build-v1/_shared/chunk-NYVSYKQZ.js";import{q as h,qa as K,ra as H,s as me,sa as m}from"/build-v1/_shared/chunk-KSDHKFAK.js";import"/build-v1/_shared/chunk-U7SXCCGG.js";import"/build-v1/_shared/chunk-UW6DCBMO.js";import"/build-v1/_shared/chunk-HZCT5NG4.js";import"/build-v1/_shared/chunk-WB6P3DCD.js";import"/build-v1/_shared/chunk-JU7SZQRR.js";import"/build-v1/_shared/chunk-NUOTICC6.js";import{a as p}from"/build-v1/_shared/chunk-JN6KKRJY.js";import"/build-v1/_shared/chunk-IFQZM2H3.js";import"/build-v1/_shared/chunk-Z3VA2LY4.js";import{a as J}from"/build-v1/_shared/chunk-ZFNGFSOU.js";import"/build-v1/_shared/chunk-BY6JJPSD.js";import"/build-v1/_shared/chunk-TSSS363U.js";import"/build-v1/_shared/chunk-L2Q467JS.js";import"/build-v1/_shared/chunk-IJ5OFGSP.js";import"/build-v1/_shared/chunk-H4OF2W6I.js";import"/build-v1/_shared/chunk-O4DIEXBJ.js";import{b as $}from"/build-v1/_shared/chunk-4G34RVNA.js";import"/build-v1/_shared/chunk-MJITJCO4.js";import"/build-v1/_shared/chunk-LSZUGY7I.js";import{m as F}from"/build-v1/_shared/chunk-OSF4U7Z2.js";import"/build-v1/_shared/chunk-AO4TCXUV.js";import"/build-v1/_shared/chunk-CNA3NZ3W.js";import"/build-v1/_shared/chunk-PVLFL3DT.js";import"/build-v1/_shared/chunk-I2DXFNCQ.js";import"/build-v1/_shared/chunk-A5Z7HMMQ.js";import{a as D}from"/build-v1/_shared/chunk-765QR4H3.js";import"/build-v1/_shared/chunk-2JKQ7TCQ.js";import"/build-v1/_shared/chunk-DA65QX4D.js";import{E as M}from"/build-v1/_shared/chunk-YRXIICRT.js";import"/build-v1/_shared/chunk-MJTHADAC.js";import"/build-v1/_shared/chunk-LGW2CJV4.js";import{x as N,y as f,z as k}from"/build-v1/_shared/chunk-N64KLDO5.js";import{a as L}from"/build-v1/_shared/chunk-C6G2CU7L.js";import{c as v,e as O}from"/build-v1/_shared/chunk-Y24IREY5.js";var ie=v(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});var P=h(),T=class{constructor(){this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0}reset(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0}finalize(){this._values||(this._source="NoValues")}getValues(){return this._rawValues?(0,P._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}setValues(e){if(!e)return;let t=(0,P._typedJsonParse)(e.data,"has_updates","EvaluationResponse");t?.has_updates===!0&&(this._rawValues=e.data,this._lcut=t.time,this._receivedAt=e.receivedAt,this._source=e.source,this._values=t)}getGate(e){var t;return this._getDetailedStoreResult((t=this._values)===null||t===void 0?void 0:t.feature_gates,e)}getConfig(e){var t;return this._getDetailedStoreResult((t=this._values)===null||t===void 0?void 0:t.dynamic_configs,e)}getLayer(e){var t;return this._getDetailedStoreResult((t=this._values)===null||t===void 0?void 0:t.layer_configs,e)}getParamStore(e){var t;return this._getDetailedStoreResult((t=this._values)===null||t===void 0?void 0:t.param_stores,e)}_getDetailedStoreResult(e,t){let r=null;return e&&(r=e[t]?e[t]:e[(0,P._DJB2)(t)]),{result:r,details:this._getDetails(r==null)}}_getDetails(e){if(this._source==="Uninitialized"||this._source==="NoValues")return{reason:this._source};let t=e?"Unrecognized":"Recognized";return{reason:`${this._source}:${t}`,lcut:this._lcut,receivedAt:this._receivedAt}}};I.default=T});var ne=v(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w._resolveDeltasResponse=void 0;var se=h(),Se=2;function De(n,e){let t=(0,se._typedJsonParse)(e,"checksum","DeltasEvaluationResponse");if(!t)return{hadBadDeltaChecksum:!0};let r=be(n,t),s=Ce(r),i=(0,se._DJB2Object)({feature_gates:s.feature_gates,dynamic_configs:s.dynamic_configs,layer_configs:s.layer_configs},Se);return i===t.checksumV2?JSON.stringify(s):{hadBadDeltaChecksum:!0,badChecksum:i,badMergedConfigs:s,badFullResponse:t.deltas_full_response}}w._resolveDeltasResponse=De;function be(n,e){return Object.assign(Object.assign(Object.assign({},n),e),{feature_gates:Object.assign(Object.assign({},n.feature_gates),e.feature_gates),layer_configs:Object.assign(Object.assign({},n.layer_configs),e.layer_configs),dynamic_configs:Object.assign(Object.assign({},n.dynamic_configs),e.dynamic_configs)})}function Ce(n){let e=n;return V(n.deleted_gates,e.feature_gates),delete e.deleted_gates,V(n.deleted_configs,e.dynamic_configs),delete e.deleted_configs,V(n.deleted_layers,e.layer_configs),delete e.deleted_layers,e}function V(n,e){n?.forEach(t=>{delete e[t]})}});var q=v(b=>{"use strict";var oe=b&&b.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(_){o(_)}}function c(l){try{u(r.throw(l))}catch(_){o(_)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0});var A=h(),Ee=ne(),j=class extends A.NetworkCore{constructor(e,t){super(e,t);let r=e?.networkConfig;this._initializeUrl=(0,A._getOverridableUrl)(r?.initializeUrl,r?.api,"/initialize",A.NetworkDefault.initializeApi)}fetchEvaluations(e,t,r,s){return oe(this,void 0,void 0,function*(){let i=t?(0,A._typedJsonParse)(t,"has_updates","InitializeResponse"):null,o={user:s,hash:"djb2",deltasResponseRequested:!1};return i?.has_updates&&(o=Object.assign(Object.assign({},o),{sinceTime:i.time,previousDerivedFields:"derived_fields"in i?i.derived_fields:{},deltasResponseRequested:!0})),this._fetchEvaluations(e,i,o,r)})}_fetchEvaluations(e,t,r,s){var i,o;return oe(this,void 0,void 0,function*(){let a=yield this.post({sdkKey:e,url:this._initializeUrl,data:r,retries:2,isStatsigEncodable:!0,priority:s});if(a?.code===204)return'{"has_updates": false}';if(a?.code!==200)return(i=a?.body)!==null&&i!==void 0?i:null;if(t?.has_updates!==!0||((o=a.body)===null||o===void 0?void 0:o.includes('"is_delta":true'))!==!0||r.deltasResponseRequested!==!0)return a.body;let c=(0,Ee._resolveDeltasResponse)(t,a.body);return typeof c=="string"?c:this._fetchEvaluations(e,t,Object.assign(Object.assign(Object.assign({},r),c),{deltasResponseRequested:!1}),s)})}};b.default=j});var ue=v(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U._makeParamStoreGetter=void 0;var ae=h(),x={disableExposureLog:!0};function R(n){return n==null||n.disableExposureLog===!1}function G(n,e){return e!=null&&!(0,ae._isTypeMatch)(n,e)}function Oe(n,e){return n.value}function we(n,e,t){return n.getFeatureGate(e.gate_name,R(t)?void 0:x).value?e.pass_value:e.fail_value}function Ae(n,e,t,r){let i=n.getDynamicConfig(e.config_name,x).get(e.param_name);return G(i,t)?t:(R(r)&&n.getDynamicConfig(e.config_name),i)}function xe(n,e,t,r){let i=n.getExperiment(e.experiment_name,x).get(e.param_name);return G(i,t)?t:(R(r)&&n.getExperiment(e.experiment_name),i)}function Re(n,e,t,r){let i=n.getLayer(e.layer_name,x).get(e.param_name);return G(i,t)?t:(R(r)&&n.getLayer(e.layer_name).get(e.param_name),i)}function Ue(n,e,t){return(r,s)=>{if(e==null)return s;let i=e[r];if(i==null||s!=null&&(0,ae._typeOf)(s)!==i.param_type)return s;switch(i.ref_type){case"static":return Oe(i,t);case"gate":return we(n,i,t);case"dynamic_config":return Ae(n,i,s,t);case"experiment":return xe(n,i,s,t);case"layer":return Re(n,i,s,t);default:return s}}}U._makeParamStoreGetter=Ue});var le=v(y=>{"use strict";var Pe=y&&y.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(_){o(_)}}function c(l){try{u(r.throw(l))}catch(_){o(_)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.StatsigEvaluationsDataAdapter=void 0;var g=h(),Te=q(),z=class extends g.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this._network=null,this._options=null}attach(e,t){super.attach(e,t),this._network=new Te.default(t??{})}getDataAsync(e,t,r){return this._getDataAsyncImpl(e,(0,g._normalizeUser)(t,this._options),r)}prefetchData(e,t){return this._prefetchDataImpl(e,t)}setData(e){let t=(0,g._typedJsonParse)(e,"has_updates","data");t&&"user"in t?super.setData(e,t.user):g.Log.error("StatsigUser not found")}setDataLegacy(e,t){super.setData(e,t)}_fetchFromNetwork(e,t,r){var s;return Pe(this,void 0,void 0,function*(){let i=yield(s=this._network)===null||s===void 0?void 0:s.fetchEvaluations(this._getSdkKey(),e,r?.priority,t);return i??null})}_getCacheKey(e){var t;let r=(0,g._getStorageKey)(this._getSdkKey(),e,(t=this._options)===null||t===void 0?void 0:t.customUserCacheKeyFunc);return`${g.DataAdapterCachePrefix}.${this._cacheSuffix}.${r}`}_isCachedResultValidFor204(e,t){return e.fullUserHash!=null&&e.fullUserHash===(0,g._getFullUserHash)(t)}};y.StatsigEvaluationsDataAdapter=z});var de=v(C=>{"use strict";var ce=C&&C.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(_){o(_)}}function c(l){try{u(r.throw(l))}catch(_){o(_)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(C,"__esModule",{value:!0});var d=h(),Ie=ie(),Ve=q(),je=ue(),qe=le(),S=class extends d.StatsigClientBase{static instance(e){let t=(0,d._getStatsigGlobal)().instance(e);return t instanceof S?t:(d.Log.warn((0,d._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new S(e??"",{}))}constructor(e,t,r=null){var s;d.SDKType._setClientType(e,"javascript-client");let i=new Ve.default(r,o=>{this.$emt(o)});super(e,(s=r?.dataAdapter)!==null&&s!==void 0?s:new qe.StatsigEvaluationsDataAdapter,i,r),this._store=new Ie.default,this._user=(0,d._normalizeUser)(t,r)}initializeSync(){this.updateUserSync(this._user)}initializeAsync(e){return this.updateUserAsync(this._user,e)}updateUserSync(e){this._resetForUser(e);let t=this.dataAdapter.getDataSync(this._user);this._store.setValues(t),this._finalizeUpdate(t),this._runPostUpdate(t??null,this._user)}updateUserAsync(e,t){return ce(this,void 0,void 0,function*(){this._resetForUser(e);let r=this._user,s=this.dataAdapter.getDataSync(r);this._setStatus("Loading",s),this._store.setValues(s),s=yield this.dataAdapter.getDataAsync(s,r,t),r===this._user&&(this._store.setValues(s),this._finalizeUpdate(s))})}getContext(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary}}getAsyncContext(){return ce(this,void 0,void 0,function*(){return Object.assign(Object.assign({},this.getContext()),{session:yield d.StatsigSession.get(this._sdkKey),stableID:yield d.StableID.get(this._sdkKey)})})}checkGate(e,t){return this.getFeatureGate(e,t).value}getFeatureGate(e,t){var r,s;let{result:i,details:o}=this._store.getGate(e),a=(0,d._makeFeatureGate)(e,o,i),c=(s=(r=this._overrideAdapter)===null||r===void 0?void 0:r.getGateOverride)===null||s===void 0?void 0:s.call(r,a,this._user,t),u=c??a;return this._enqueueExposure(e,(0,d._createGateExposure)(this._user,u),t),this.$emt({name:"gate_evaluation",gate:u}),u}getDynamicConfig(e,t){var r,s;let{result:i,details:o}=this._store.getConfig(e),a=(0,d._makeDynamicConfig)(e,o,i),c=(s=(r=this._overrideAdapter)===null||r===void 0?void 0:r.getDynamicConfigOverride)===null||s===void 0?void 0:s.call(r,a,this._user,t),u=c??a;return this._enqueueExposure(e,(0,d._createConfigExposure)(this._user,u),t),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:u}),u}getExperiment(e,t){var r,s;let{result:i,details:o}=this._store.getConfig(e),a=(0,d._makeExperiment)(e,o,i),c=(s=(r=this._overrideAdapter)===null||r===void 0?void 0:r.getExperimentOverride)===null||s===void 0?void 0:s.call(r,a,this._user,t),u=c??a;return this._enqueueExposure(e,(0,d._createConfigExposure)(this._user,u),t),this.$emt({name:"experiment_evaluation",experiment:u}),u}getLayer(e,t){var r,s,i;let{result:o,details:a}=this._store.getLayer(e),c=(0,d._makeLayer)(e,a,o),u=(s=(r=this._overrideAdapter)===null||r===void 0?void 0:r.getLayerOverride)===null||s===void 0?void 0:s.call(r,c,this._user,t),l=(0,d._mergeOverride)(c,u,(i=u?.__value)!==null&&i!==void 0?i:c.__value,_=>{this._enqueueExposure(e,(0,d._createLayerParameterExposure)(this._user,l,_),t)});return this.$emt({name:"layer_evaluation",layer:l}),l}getParameterStore(e,t){let{result:r,details:s}=this._store.getParamStore(e);return this._logger.incrementNonExposureCount(e),{name:e,details:s,__configuration:r,get:(0,je._makeParamStoreGetter)(this,r,t)}}logEvent(e,t,r){let s=typeof e=="string"?{eventName:e,value:t,metadata:r}:e;this._logger.enqueue(Object.assign(Object.assign({},s),{user:this._user,time:Date.now()}))}_primeReadyRipcord(){this.$on("error",()=>{this.loadingStatus==="Loading"&&this._finalizeUpdate(null)})}_finalizeUpdate(e){this._store.finalize(),this._setStatus("Ready",e)}_runPostUpdate(e,t){this.dataAdapter.getDataAsync(e,t,{priority:"low"}).catch(r=>{d.Log.error("An error occurred after update.",r)})}_resetForUser(e){var t;this._logger.reset(),this._store.reset(),this._user=(0,d._normalizeUser)(e,this._options);let r=(t=this._user.customIDs)===null||t===void 0?void 0:t.stableID;r&&d.StableID.setOverride(r,this._sdkKey)}};C.default=S});var fe=v(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.StatsigClient=void 0;var _e=de();E.StatsigClient=_e.default;__STATSIG__=Object.assign(Object.assign({},__STATSIG__!=null?__STATSIG__:{}),{StatsigClient:_e.default});E.default=__STATSIG__});var W=O(L());var ye=()=>{let n=F(),[e]=(0,W.useState)(()=>{let t=K.create({});return t.init(n),!D.production&&J()&&(window.__e2eGoHistory=n),t});return e};function Y({children:n}){let e=ye();return B(()=>{e.account.initialize()}),f(H.Provider,{value:e,children:n})}var Z=p(()=>{let{account:n}=m();return X(e=>{n.hasCodeThatIsSaving&&e.preventDefault()}),null});var ee=O(L());function te(){return(0,ee.useEffect)(()=>{let n="2024-10-16T12:53:04+05:30",e="20bfa88",t=new Date(n).getTime();console.log("using app version",e,t)},[]),null}var re=p(()=>{let{notify:n}=m(),{enqueueSnackbar:e}=$();if(n.queue.length&&n.last){let{message:t,variant:r}=n.last;setTimeout(()=>{e(t,{variant:r,preventDuplicate:!0})}),n.pop()}return null});var ve=O(fe());var ge=O(me());function Ge(n,e){let t={userId:n};e&&(t.email=e);let r={environment:{tier:D.production?"production":"staging"}},s=new ve.StatsigClient(D.statsigClientKey,t,r);return s.initializeAsync().catch(i=>{console.error(i)}),{isLoading:!1,client:s}}var he=p(({children:n})=>{let e=m().account;if(e.uid){let{client:t,isLoading:r}=Ge(e.uid),s=!1,i={userID:e.uid,custom:{}};return e.billing.email&&(i.email=e.billing.email,s=!0),e.billing.accountCreationDate&&(i.custom.org_created_at=e.billing.accountCreationDate.valueOf(),s=!0),s&&t&&t.updateUserAsync(i),f(ge.StatsigProvider,{client:t,children:n})}return n});function pe(){return f(Y,{children:f(Q,{children:f(he,{children:k(N,{children:[f(re,{}),f(te,{}),f(Z,{}),f(M,{})]})})})})}export{pe as default};
